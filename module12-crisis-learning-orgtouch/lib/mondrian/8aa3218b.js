"use strict";(self.webpackChunk_articulate_mondrian_bundles=self.webpackChunk_articulate_mondrian_bundles||[]).push([[812],{8761:(t,e,n)=>{n.d(e,{A:()=>l,b:()=>s});var i=n(1182),o=n.n(i),a=n(2806),r=n.n(a)()(o());r.push([t.id,".hXRin0tc .tiptap {\n  font-family: var(--mon-theme-font-body);\n  height: 100%;\n  width: 100%;\n}\n\n.hXRin0tc .tiptap :is(h1, h2, h3, h4, h5) {\n  font-family: var(--mon-theme-font-heading);\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n.hXRin0tc .tiptap :is(p, h1, h2, h3, h4, h5) {\n  margin: 0;\n}\n\n.hXRin0tc .tiptap strong {\n  font-weight: bold;\n}\n\n.hXRin0tc .tiptap em {\n  font-style: italic;\n}\n\n.hXRin0tc .tiptap s {\n  text-decoration: line-through;\n}\n\n.hXRin0tc .tiptap u {\n  text-decoration: underline;\n}\n","",{version:3,sources:["webpack://./../../packages/core/src/styles/tiptap.module.css"],names:[],mappings:"AAAA;EACE,uCAAuC;EACvC,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,0CAA0C;EAC1C,kBAAkB;EAClB,oBAAoB;AACtB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,0BAA0B;AAC5B",sourcesContent:[".textItem :global(.tiptap) {\n  font-family: var(--mon-theme-font-body);\n  height: 100%;\n  width: 100%;\n}\n\n.textItem :global(.tiptap :is(h1, h2, h3, h4, h5)) {\n  font-family: var(--mon-theme-font-heading);\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n.textItem :global(.tiptap :is(p, h1, h2, h3, h4, h5)) {\n  margin: 0;\n}\n\n.textItem :global(.tiptap strong) {\n  font-weight: bold;\n}\n\n.textItem :global(.tiptap em) {\n  font-style: italic;\n}\n\n.textItem :global(.tiptap s) {\n  text-decoration: line-through;\n}\n\n.textItem :global(.tiptap u) {\n  text-decoration: underline;\n}\n"],sourceRoot:""}]);var s="hXRin0tc";const l=r},2812:(t,e,n)=>{n.r(e),n.d(e,{default:()=>lr});var i=n(6218),o=(n(9763),n(2604)),a=n.n(o),r=n(101),s=n.n(r),l=n(5863),d=n.n(l),c=n(3124),u=n.n(c),p=n(6896),m=n.n(p),f=n(9917),g=n.n(f),h=n(8761),z={};z.styleTagTransform=g(),z.setAttributes=u(),z.insert=d().bind(null,"head"),z.domAPI=s(),z.insertStyleElement=m(),a()(h.A,z),h.A&&h.A.locals&&h.A.locals;var b=n(7268);const _="isLearn",y=()=>(0,b.getContext)(_)??!1;function v(t){return`assets/${t.path}`}var $=n(6195);const x=$.z.object({id:$.z.string(),path:$.z.string(),name:$.z.string(),width:$.z.number().optional(),height:$.z.number().optional()}),w=$.z.object({unit:$.z.enum(["px","%","auto","fr"]),value:$.z.number()}),k=$.z.object({applied:$.z.boolean().default(!1),type:$.z.enum(["none","fill"]).default("none"),color:$.z.string().default("#000000"),opacity:$.z.number().default(1),style:$.z.enum(["solid","dashed","dotted"]).default("solid"),width:w.default({value:1,unit:"px"})}),S=$.z.object({assetId:$.z.string().optional(),color:$.z.string().optional(),opacity:$.z.number().min(0).max(1).default(1)}),I=S.extend({type:$.z.literal("color"),color:$.z.string().default("#e4e4e4")}),A=$.z.object({width:$.z.number(),height:$.z.number(),left:$.z.number(),top:$.z.number()}),C=S.extend({type:$.z.literal("image"),assetId:$.z.string(),crop:A.default({width:1,height:1,left:0,top:0})}),j=S.extend({type:$.z.literal("none")}),E=$.z.discriminatedUnion("type",[I,C,j]),M=$.z.discriminatedUnion("type",[I,j]),L=$.z.object({top:w.default({value:0,unit:"px"}),left:w.default({value:0,unit:"px"}),bottom:w.default({value:0,unit:"px"}),right:w.default({value:0,unit:"px"})}),P=$.z.object({type:$.z.literal("rectangle"),borderRadius:$.z.object({topLeft:$.z.number(),topRight:$.z.number(),bottomRight:$.z.number(),bottomLeft:$.z.number()}).optional()}),R=$.z.object({type:$.z.literal("ellipse")}),T=$.z.discriminatedUnion("type",[P,R]),V=$.z.object({id:$.z.string(),name:$.z.string().max(128)}),F=V.extend({x:w.default({value:0,unit:"px"}),y:w.default({value:0,unit:"px"}),xOffset:$.z.number().default(0),yOffset:$.z.number().default(0),position:$.z.literal("absolute").default("absolute"),width:w.default({value:100,unit:"%"}),height:w.default({value:100,unit:"%"}),padding:L,fill:E,overlay:M,aspectRatioLocked:$.z.boolean(),border:k,clipDef:T.default({type:"rectangle"}),rotation:$.z.number().default(0),flipX:$.z.boolean().default(!1),flipY:$.z.boolean().default(!1)}),H=t=>$.z.intersection(V,t.partial()),B=t=>$.z.intersection($.z.object({default:t}),$.z.record(H(t))),Y=t=>$.z.object({id:$.z.string(),blockumentId:$.z.string(),clonedFromId:$.z.string().optional(),parentId:$.z.string(),type:$.z.string(),name:$.z.string().max(128),tagName:$.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:$.z.boolean().default(!1),authoringVisible:$.z.boolean().default(!0),initialVisible:$.z.boolean().default(!0),initialState:$.z.string().default("default"),states:B(t),assets:$.z.record(x).default({}).optional(),removed:$.z.boolean().default(!1),_v:$.z.literal(4)}),N=(H(F),$.z.object({default:$.z.string()})),O=F.extend({audioSources:N}),q=Y(O).extend({type:$.z.literal("audio")}),U=(H(O),$.z.object({id:$.z.string(),clonedFromId:$.z.string().optional(),state:$.z.string(),visible:$.z.boolean()})),D=$.z.object({id:$.z.string(),event:$.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:$.z.string().optional()}),X=D.extend({action:$.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:$.z.string()}),W=D.extend({action:$.z.literal("changeState"),targetId:$.z.string(),targetState:$.z.string().default("default")}),K=D.extend({action:$.z.literal("changeVisibility"),targetId:$.z.string(),targetVisibility:$.z.boolean()}),Q=$.z.discriminatedUnion("action",[W,K,X]),Z=$.z.object({id:$.z.string(),title:$.z.string().max(255),children:$.z.array(U).max(1),triggers:$.z.array(Q),_v:$.z.literal(4)}),G=F.extend({children:$.z.array(U)}),J=Y(G).extend({type:$.z.literal("group")}),tt=(H(G),$.z.intersection($.z.object({type:$.z.string().optional(),attrs:$.z.record($.z.any()).optional(),content:$.z.array($.z.lazy((()=>tt))).optional(),marks:$.z.array($.z.intersection($.z.object({type:$.z.string(),attrs:$.z.record($.z.any()).optional()}),$.z.record($.z.any()))).optional(),text:$.z.string().optional()}),$.z.record($.z.any()))),et=$.z.object({id:$.z.string(),type:$.z.literal("tiptap"),json:tt}),nt=$.z.enum(["top","middle","bottom"]),it=F.extend({text:et,textVerticalAlign:nt.default("top")}),ot=Y(it).extend({type:$.z.literal("text")}),at=(H(it),it.extend({altText:$.z.string().nullable().default(null)})),rt=Y(at).extend({type:$.z.literal("shape")}),st=(H(at),$.z.object({default:$.z.string()})),lt=F.extend({videoSources:st}),dt=Y(lt).extend({type:$.z.literal("video")}),ct=(H(lt),$.z.discriminatedUnion("type",[q,J,rt,ot,dt])),ut=$.z.object({blockuments:$.z.record(Z).optional(),items:$.z.record(ct).optional()}),pt=($.z.object({id:$.z.string(),blockumentId:$.z.string(),name:$.z.string().max(128)}),ut);var mt;!function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(mt||(mt={}));const ft="mediaPlay",gt="mediaPause",ht="mediaEnd",zt="changeState",bt="changeVisibility",_t="mediaPause",yt="mediaPlay",vt="mediaEnd",$t=$.z.object({id:$.z.string(),path:$.z.string(),name:$.z.string(),width:$.z.number().optional(),height:$.z.number().optional()}),xt=$.z.object({unit:$.z.enum(["px","%","auto","fr"]),value:$.z.number()}),wt=$.z.object({applied:$.z.boolean().default(!1),type:$.z.enum(["none","fill"]).default("none"),color:$.z.string().default("#000000"),opacity:$.z.number().default(1),style:$.z.enum(["solid","dashed","dotted"]).default("solid"),width:xt.default({value:1,unit:"px"})}),kt=$.z.object({assetId:$.z.string().optional(),color:$.z.string().optional(),opacity:$.z.number().min(0).max(1).default(1)}),St=kt.extend({type:$.z.literal("color"),color:$.z.string().default("#e4e4e4")}),It=$.z.object({width:$.z.number(),height:$.z.number(),left:$.z.number(),top:$.z.number()}),At=kt.extend({type:$.z.literal("image"),assetId:$.z.string(),crop:It.default({width:1,height:1,left:0,top:0})}),Ct=kt.extend({type:$.z.literal("none")}),jt=$.z.discriminatedUnion("type",[St,At,Ct]),Et=$.z.discriminatedUnion("type",[St,Ct]),Mt=$.z.object({top:xt.default({value:0,unit:"px"}),left:xt.default({value:0,unit:"px"}),bottom:xt.default({value:0,unit:"px"}),right:xt.default({value:0,unit:"px"})}),Lt=$.z.object({id:$.z.string(),name:$.z.string().max(128)}),Pt=Lt.extend({x:xt.default({value:0,unit:"px"}),y:xt.default({value:0,unit:"px"}),xOffset:$.z.number().default(0),yOffset:$.z.number().default(0),position:$.z.literal("absolute").default("absolute"),width:xt.default({value:100,unit:"%"}),height:xt.default({value:100,unit:"%"}),padding:Mt,fill:jt,overlay:Et,aspectRatioLocked:$.z.boolean(),border:wt,borderRadius:$.z.object({applied:$.z.boolean().default(!1),topLeft:xt.default({value:0,unit:"px"}),topRight:xt.default({value:0,unit:"px"}),bottomRight:xt.default({value:0,unit:"px"}),bottomLeft:xt.default({value:0,unit:"px"})}),rotation:$.z.number().default(0),flipX:$.z.boolean().default(!1),flipY:$.z.boolean().default(!1)}),Rt=$.z.object({id:$.z.string(),event:$.z.enum(["click","hover"])}),Tt=Rt.extend({action:$.z.literal("changeState"),targetId:$.z.string(),targetState:$.z.string().default("default")}),Vt=Rt.extend({action:$.z.literal("changeVisibility"),targetId:$.z.string(),targetVisibility:$.z.boolean()}),Ft=$.z.discriminatedUnion("action",[Tt,Vt]),Ht=t=>$.z.intersection(Lt,t.partial()),Bt=t=>$.z.intersection($.z.object({default:t}),$.z.record(Ht(t))),Yt=t=>$.z.object({id:$.z.string(),blockumentId:$.z.string(),clonedFromId:$.z.string().optional(),parentId:$.z.string(),type:$.z.string(),name:$.z.string().max(128),tagName:$.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:$.z.boolean().default(!1),authoringVisible:$.z.boolean().default(!0),initialVisible:$.z.boolean().default(!0),initialState:$.z.string().default("default"),states:Bt(t),triggers:$.z.array(Ft),assets:$.z.record($t).default({}).optional(),removed:$.z.boolean().default(!1)}),Nt=(Ht(Pt),$.z.object({id:$.z.string(),clonedFromId:$.z.string().optional(),state:$.z.string(),visible:$.z.boolean()})),Ot=$.z.object({id:$.z.string(),title:$.z.string().max(255),children:$.z.array(Nt).max(1)}),qt=Pt.extend({children:$.z.array(Nt)}),Ut=Yt(qt).extend({type:$.z.literal("group")}),Dt=(Ht(qt),Pt.extend({altText:$.z.string().default("")})),Xt=Yt(Dt).extend({type:$.z.literal("image")}),Wt=(Ht(Dt),$.z.intersection($.z.object({type:$.z.string().optional(),attrs:$.z.record($.z.any()).optional(),content:$.z.array($.z.lazy((()=>Wt))).optional(),marks:$.z.array($.z.intersection($.z.object({type:$.z.string(),attrs:$.z.record($.z.any()).optional()}),$.z.record($.z.any()))).optional(),text:$.z.string().optional()}),$.z.record($.z.any()))),Kt=$.z.object({id:$.z.string(),type:$.z.literal("tiptap"),json:Wt}),Qt=$.z.enum(["top","middle","bottom"]),Zt=Pt.extend({text:Kt,textVerticalAlign:Qt.default("top")}),Gt=Yt(Zt).extend({type:$.z.literal("text")}),Jt=(Ht(Zt),Zt.extend({clipPath:$.z.literal("ellipse").nullable().default(null),altText:$.z.string().nullable().default(null)})),te=Yt(Jt).extend({type:$.z.literal("shape")}),ee=(Ht(Jt),$.z.object({default:$.z.string()})),ne=Pt.extend({videoSources:ee}),ie=Yt(ne).extend({type:$.z.literal("video")}),oe=(Ht(ne),$.z.discriminatedUnion("type",[Ut,Xt,te,Gt,ie]));var ae;$.z.object({blockuments:$.z.record(Ot).optional(),items:$.z.record(oe).optional()}),function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(ae||(ae={}));const re=$.z.object({id:$.z.string(),path:$.z.string(),name:$.z.string(),width:$.z.number().optional(),height:$.z.number().optional()}),se=$.z.object({unit:$.z.enum(["px","%","auto","fr"]),value:$.z.number()}),le=$.z.object({applied:$.z.boolean().default(!1),type:$.z.enum(["none","fill"]).default("none"),color:$.z.string().default("#000000"),opacity:$.z.number().default(1),style:$.z.enum(["solid","dashed","dotted"]).default("solid"),width:se.default({value:1,unit:"px"})}),de=$.z.object({assetId:$.z.string().optional(),color:$.z.string().optional(),opacity:$.z.number().min(0).max(1).default(1)}),ce=de.extend({type:$.z.literal("color"),color:$.z.string().default("#e4e4e4")}),ue=$.z.object({width:$.z.number(),height:$.z.number(),left:$.z.number(),top:$.z.number()}),pe=de.extend({type:$.z.literal("image"),assetId:$.z.string(),crop:ue.default({width:1,height:1,left:0,top:0})}),me=de.extend({type:$.z.literal("none")}),fe=$.z.discriminatedUnion("type",[ce,pe,me]),ge=$.z.discriminatedUnion("type",[ce,me]),he=$.z.object({top:se.default({value:0,unit:"px"}),left:se.default({value:0,unit:"px"}),bottom:se.default({value:0,unit:"px"}),right:se.default({value:0,unit:"px"})}),ze=$.z.object({id:$.z.string(),name:$.z.string().max(128)}),be=ze.extend({x:se.default({value:0,unit:"px"}),y:se.default({value:0,unit:"px"}),xOffset:$.z.number().default(0),yOffset:$.z.number().default(0),position:$.z.literal("absolute").default("absolute"),width:se.default({value:100,unit:"%"}),height:se.default({value:100,unit:"%"}),padding:he,fill:fe,overlay:ge,aspectRatioLocked:$.z.boolean(),border:le,borderRadius:$.z.object({applied:$.z.boolean().default(!1),topLeft:se.default({value:0,unit:"px"}),topRight:se.default({value:0,unit:"px"}),bottomRight:se.default({value:0,unit:"px"}),bottomLeft:se.default({value:0,unit:"px"})}),rotation:$.z.number().default(0),flipX:$.z.boolean().default(!1),flipY:$.z.boolean().default(!1)}),_e=t=>$.z.intersection(ze,t.partial()),ye=t=>$.z.intersection($.z.object({default:t}),$.z.record(_e(t))),ve=t=>$.z.object({id:$.z.string(),blockumentId:$.z.string(),clonedFromId:$.z.string().optional(),parentId:$.z.string(),type:$.z.string(),name:$.z.string().max(128),tagName:$.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:$.z.boolean().default(!1),authoringVisible:$.z.boolean().default(!0),initialVisible:$.z.boolean().default(!0),initialState:$.z.string().default("default"),states:ye(t),assets:$.z.record(re).default({}).optional(),removed:$.z.boolean().default(!1)}),$e=(_e(be),$.z.object({id:$.z.string(),clonedFromId:$.z.string().optional(),state:$.z.string(),visible:$.z.boolean()})),xe=$.z.object({id:$.z.string(),event:$.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:$.z.string().optional()}),we=xe.extend({action:$.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:$.z.string()}),ke=xe.extend({action:$.z.literal("changeState"),targetId:$.z.string(),targetState:$.z.string().default("default")}),Se=xe.extend({action:$.z.literal("changeVisibility"),targetId:$.z.string(),targetVisibility:$.z.boolean()}),Ie=$.z.discriminatedUnion("action",[ke,Se,we]),Ae=$.z.object({id:$.z.string(),title:$.z.string().max(255),children:$.z.array($e).max(1),triggers:$.z.array(Ie)}),Ce=be.extend({children:$.z.array($e)}),je=ve(Ce).extend({type:$.z.literal("group")}),Ee=(_e(Ce),be.extend({altText:$.z.string().default("")})),Me=ve(Ee).extend({type:$.z.literal("image")}),Le=(_e(Ee),$.z.intersection($.z.object({type:$.z.string().optional(),attrs:$.z.record($.z.any()).optional(),content:$.z.array($.z.lazy((()=>Le))).optional(),marks:$.z.array($.z.intersection($.z.object({type:$.z.string(),attrs:$.z.record($.z.any()).optional()}),$.z.record($.z.any()))).optional(),text:$.z.string().optional()}),$.z.record($.z.any()))),Pe=$.z.object({id:$.z.string(),type:$.z.literal("tiptap"),json:Le}),Re=$.z.enum(["top","middle","bottom"]),Te=be.extend({text:Pe,textVerticalAlign:Re.default("top")}),Ve=ve(Te).extend({type:$.z.literal("text")}),Fe=(_e(Te),Te.extend({clipPath:$.z.literal("ellipse").nullable().default(null),altText:$.z.string().nullable().default(null)})),He=ve(Fe).extend({type:$.z.literal("shape")}),Be=(_e(Fe),$.z.object({default:$.z.string()})),Ye=be.extend({videoSources:Be}),Ne=ve(Ye).extend({type:$.z.literal("video")}),Oe=(_e(Ye),$.z.discriminatedUnion("type",[je,Me,He,Ve,Ne]));var qe;$.z.object({blockuments:$.z.record(Ae).optional(),items:$.z.record(Oe).optional()}),$.z.object({id:$.z.string(),blockumentId:$.z.string(),name:$.z.string().max(128)}),function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(qe||(qe={}));var Ue=n(3134),De=n.n(Ue);n(1967);const Xe=$.z.object({id:$.z.string(),path:$.z.string(),name:$.z.string(),width:$.z.number().optional(),height:$.z.number().optional()}),We=$.z.object({unit:$.z.enum(["px","%","auto","fr"]),value:$.z.number()}),Ke=$.z.object({applied:$.z.boolean().default(!1),type:$.z.enum(["none","fill"]).default("none"),color:$.z.string().default("#000000"),opacity:$.z.number().default(1),style:$.z.enum(["solid","dashed","dotted"]).default("solid"),width:We.default({value:1,unit:"px"})}),Qe=$.z.object({assetId:$.z.string().optional(),color:$.z.string().optional(),opacity:$.z.number().min(0).max(1).default(1)}),Ze=Qe.extend({type:$.z.literal("color"),color:$.z.string().default("#e4e4e4")}),Ge=$.z.object({width:$.z.number(),height:$.z.number(),left:$.z.number(),top:$.z.number()}),Je=Qe.extend({type:$.z.literal("image"),assetId:$.z.string(),crop:Ge.default({width:1,height:1,left:0,top:0})}),tn=Qe.extend({type:$.z.literal("none")}),en=$.z.discriminatedUnion("type",[Ze,Je,tn]),nn=$.z.discriminatedUnion("type",[Ze,tn]),on=$.z.object({top:We.default({value:0,unit:"px"}),left:We.default({value:0,unit:"px"}),bottom:We.default({value:0,unit:"px"}),right:We.default({value:0,unit:"px"})}),an=$.z.object({id:$.z.string(),name:$.z.string().max(128)}),rn=an.extend({x:We.default({value:0,unit:"px"}),y:We.default({value:0,unit:"px"}),xOffset:$.z.number().default(0),yOffset:$.z.number().default(0),position:$.z.literal("absolute").default("absolute"),width:We.default({value:100,unit:"%"}),height:We.default({value:100,unit:"%"}),padding:on,fill:en,overlay:nn,aspectRatioLocked:$.z.boolean(),border:Ke,borderRadius:$.z.object({applied:$.z.boolean().default(!1),topLeft:We.default({value:0,unit:"px"}),topRight:We.default({value:0,unit:"px"}),bottomRight:We.default({value:0,unit:"px"}),bottomLeft:We.default({value:0,unit:"px"})}),rotation:$.z.number().default(0),flipX:$.z.boolean().default(!1),flipY:$.z.boolean().default(!1)}),sn=t=>$.z.intersection(an,t.partial()),ln=t=>$.z.intersection($.z.object({default:t}),$.z.record(sn(t))),dn=t=>$.z.object({id:$.z.string(),blockumentId:$.z.string(),clonedFromId:$.z.string().optional(),parentId:$.z.string(),type:$.z.string(),name:$.z.string().max(128),tagName:$.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:$.z.boolean().default(!1),authoringVisible:$.z.boolean().default(!0),initialVisible:$.z.boolean().default(!0),initialState:$.z.string().default("default"),states:ln(t),assets:$.z.record(Xe).default({}).optional(),removed:$.z.boolean().default(!1),_v:$.z.literal(3)}),cn=(sn(rn),$.z.object({default:$.z.string()})),un=rn.extend({audioSources:cn}),pn=dn(un).extend({type:$.z.literal("audio")}),mn=(sn(un),$.z.object({id:$.z.string(),clonedFromId:$.z.string().optional(),state:$.z.string(),visible:$.z.boolean()})),fn=$.z.object({id:$.z.string(),event:$.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:$.z.string().optional()}),gn=fn.extend({action:$.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:$.z.string()}),hn=fn.extend({action:$.z.literal("changeState"),targetId:$.z.string(),targetState:$.z.string().default("default")}),zn=fn.extend({action:$.z.literal("changeVisibility"),targetId:$.z.string(),targetVisibility:$.z.boolean()}),bn=$.z.discriminatedUnion("action",[hn,zn,gn]),_n=$.z.object({id:$.z.string(),title:$.z.string().max(255),children:$.z.array(mn).max(1),triggers:$.z.array(bn),_v:$.z.literal(3)}),yn=rn.extend({children:$.z.array(mn)}),vn=dn(yn).extend({type:$.z.literal("group")}),$n=(sn(yn),$.z.intersection($.z.object({type:$.z.string().optional(),attrs:$.z.record($.z.any()).optional(),content:$.z.array($.z.lazy((()=>$n))).optional(),marks:$.z.array($.z.intersection($.z.object({type:$.z.string(),attrs:$.z.record($.z.any()).optional()}),$.z.record($.z.any()))).optional(),text:$.z.string().optional()}),$.z.record($.z.any()))),xn=$.z.object({id:$.z.string(),type:$.z.literal("tiptap"),json:$n}),wn=$.z.enum(["top","middle","bottom"]),kn=rn.extend({text:xn,textVerticalAlign:wn.default("top")}),Sn=dn(kn).extend({type:$.z.literal("text")}),In=(sn(kn),kn.extend({clipPath:$.z.literal("ellipse").nullable().default(null),altText:$.z.string().nullable().default(null)})),An=dn(In).extend({type:$.z.literal("shape")}),Cn=(sn(In),$.z.object({default:$.z.string()})),jn=rn.extend({videoSources:Cn}),En=dn(jn).extend({type:$.z.literal("video")}),Mn=(sn(jn),$.z.discriminatedUnion("type",[pn,vn,An,Sn,En]));var Ln;$.z.object({blockuments:$.z.record(_n).optional(),items:$.z.record(Mn).optional()}),$.z.object({id:$.z.string(),blockumentId:$.z.string(),name:$.z.string().max(128)}),function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(Ln||(Ln={})),n(4816),n(2),n(3537),n(8683),n(9840),new Set(["courier","arial","helvetica","times new roman"]);var Pn=n(4198),Rn=n(2559);const Tn=14,Vn=1.2,Fn="merriweather",Hn="lato",Bn="#000000",Yn={2:{fontSize:24,lineHeight:1.4,fontFamily:Hn},3:{fontSize:18,lineHeight:1.4,fontFamily:Hn},4:{fontSize:16,lineHeight:1.3,fontFamily:Hn},5:{fontSize:14,lineHeight:1.3,fontFamily:Hn}};function Nn({tr:t}){const{$head:e}=t.selection;return t.setSelection(new Rn.U3(t.doc.resolve(e.start()),t.doc.resolve(e.end()))),!0}function On(t,e,n){const i=n.getAttributes("textStyle").color,o=n.getAttributes("paragraph").textAlign||n.getAttributes("heading").textAlign||"left";if(t=t.command(Nn).unsetMark("textStyle").unsetMark("bold").unsetMark("italic").unsetMark("underline").unsetMark("strike").unsetMark("highlight"),"paragraph"===e)t=t.setParagraph().setTextSize(Tn).setLineHeight(Vn).setFontFamily(Fn);else{const n=parseInt(e.substring(1)),i=Yn[n];t=t.setHeading({level:n}).setTextSize(i.fontSize).setLineHeight(i.lineHeight).setFontFamily(i.fontFamily)}return(t=t.setColor(i)).setTextAlign(o)}function qn(t,e){const n=t.chain(),i=t.isActive("heading"),o=i?t.getAttributes("heading").level:null,a=e.startsWith("h")?parseInt(e.substring(1)):null;if(i&&o===a)return On(n,"paragraph",t).run();const{$head:r}=t.state.selection,s=0===r.parent.content.size;let l=On(n,e,t);if(s)if("paragraph"===e)l=l.setTextSize(Tn).setFontFamily(Fn).setColor(Bn);else{const t=parseInt(e.substring(1)),n=Yn[t];l=l.setTextSize(n.fontSize).setFontFamily(n.fontFamily).setColor(Bn)}return l.run()}const Un=Pn.YY.create({name:"headingShortcuts",addKeyboardShortcuts(){return{"Mod-Alt-2":()=>qn(this.editor,"h2"),"Mod-Alt-3":()=>qn(this.editor,"h3"),"Mod-Alt-4":()=>qn(this.editor,"h4"),"Mod-Alt-5":()=>qn(this.editor,"h5")}}});var Dn=n(4717),Xn=n(3004),Wn=n(4758),Kn=n(2359),Qn=n(31),Zn=n(2740),Gn=n(5873),Jn=n(9395);const ti=/([a-z%]+)\s*$/i,ei=Pn.YY.create({name:"textSize",addGlobalAttributes:()=>[{types:["textStyle","highlight"],attributes:{textSize:{default:Tn,parseHTML(t){const e=t.style.fontSize,n=parseFloat(e);if(isNaN(n))return null;const i=ti.exec(e);if(null==i)return null;switch(i[1]){case"rem":return Math.round(10*n);case"px":return Math.round(n);default:return null}},renderHTML:t=>({style:`font-size: ${t.textSize/10}rem`})}}}],addCommands:()=>({setTextSize:t=>({chain:e,editor:n})=>{const i=n.isActive("highlight"),o=e().setMark("textStyle",{textSize:t});return i&&o.setMark("highlight",{textSize:t}),o.run()}})}),ni=Pn.YY.create({name:"lineHeight",addGlobalAttributes:()=>[{types:["paragraph","heading"],attributes:{lineHeight:{default:Vn,parseHTML(t){const e=t.style.lineHeight,n=parseFloat(e);return isNaN(n)?null:n},renderHTML:t=>({style:`line-height: ${t.lineHeight};`})}}}],addCommands:()=>({setLineHeight:t=>({commands:e})=>{const n=e.updateAttributes("paragraph",{lineHeight:t}),i=e.updateAttributes("heading",{lineHeight:t});return n&&i}})}),ii=Pn.YY.create({name:"fontFamily",addGlobalAttributes:()=>[{types:["textStyle"],attributes:{fontFamily:{default:Fn,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}],addCommands:()=>({setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run()})});Dn.A.configure({types:["textStyle"]});const oi=Pn.YY.create({name:"init",addCommands:()=>({initFontFamily:()=>({chain:t})=>t().setFontFamily(Fn).run(),initLineHeight:()=>({chain:t})=>t().setLineHeight(Vn).run(),initTextSize:()=>({chain:t})=>t().setTextSize(Tn).run(),initColor:()=>({chain:t})=>t().setColor(Bn).run()})}),ai="latestDefocusedSelectionDecoration",ri=Pn.YY.create({name:ai,addProseMirrorPlugins:()=>[new Rn.k_({key:new Rn.hs(ai),state:{init:t=>Gn.zF.empty,apply(t,e){const{doc:n,selection:i}=t,o=t.getMeta(ai),a=i&&i.from!==i.to;if(!a||"focus"===o?.action)return Gn.zF.empty;if(a&&"blur"===o?.action){const t=Gn.NZ.inline(i.from,i.to,{class:"latest-defocused-selection",nodeName:"mark"});return Gn.zF.create(n,[t])}return e}},props:{decorations(t){return this.getState(t)},handleDOMEvents:{blur(t){const{tr:e}=t.state,n=e.setMeta(ai,{from:e.selection.from,to:e.selection.to,action:"blur"});t.dispatch(n)},focus(t){const{tr:e}=t.state,n=e.setMeta(ai,{from:e.selection.from,to:e.selection.to,action:"focus"});t.dispatch(n)}}}})]}),si=Pn.YY.create({name:"clearMarksOnEnter",addKeyboardShortcuts(){return{Enter:()=>{const{state:t}=this.editor,{selection:e}=t,{$from:n,empty:i}=e;if(!i)return!1;const o=n.parent;if("heading"!==o.type.name)return!1;const a=n.marks().filter((t=>"textStyle"===t.type.name));let r=null;a.length>0&&(r=a[0].attrs.color||null);const s=o.attrs.textAlign||"left";let l=this.editor.chain().splitBlock().setParagraph().setTextAlign(s);return l=l.unsetMark("bold").unsetMark("italic").unsetMark("underline").unsetMark("strike").unsetMark("highlight"),l=r?l.setMark("textStyle",{color:r}):l.unsetMark("textStyle"),l.run()}}}}),li=[Jn.A.configure({history:!1,heading:{levels:[2,3,4,5]}}),Kn.A.configure({types:["heading","paragraph"]}),Xn.Ay.configure({multicolor:!0}),Un,si,Qn.A,Dn.A,ei,ni,Zn.A,Wn.A,ii,oi,ri];(0,Pn._w)(li);class di extends $.z.ZodType{constructor(t){super({}),this._object=t}_parse(t){const e={},{data:n}=t;if(n&&"object"==typeof n&&!Array.isArray(n))for(const[t,i]of Object.entries(this._object.shape))if(Object.hasOwn(n,t)){const o=n[t],a=i.safeParse(o);a.success&&(e[t]=a.data)}return{status:"valid",value:e}}}function ci(t){return new di(t)}const ui=$.z.object({accentContrast:$.z.string(),allowSearch:$.z.boolean(),animateBlockEntrance:$.z.boolean(),blockPaddingBottom:$.z.number(),blockPaddingTop:$.z.number(),bodyTypefaceId:$.z.string(),buttonInlineStyle:$.z.string(),buttonNavigationStyle:$.z.string(),buttonScheme:$.z.string(),colorAccent:$.z.string(),compactShowLessonCount:$.z.boolean(),coverImage:$.z.string(),coverImageAlpha:$.z.number(),coverImageDefault:$.z.string(),coverPageType:$.z.string(),customColorLessonHeaderContrast:$.z.string(),enableVideoPlaybackSpeed:$.z.boolean(),headingTypefaceId:$.z.string(),hideLessonHeaders:$.z.boolean(),lessonHeaderColor:$.z.string().nullable(),lessonHeaderImage:$.z.string(),lessonHeaderImageAlpha:$.z.number(),lessonHeaderImageColor:$.z.string(),lessonHeaderSize:$.z.string(),lessonHeaderStyle:$.z.string(),markLessonsComplete:$.z.boolean(),navigation:$.z.boolean(),navigationRestricted:$.z.boolean(),navigationStyle:$.z.string(),showAuthor:$.z.boolean(),showLessonCount:$.z.boolean(),showNavigationButtons:$.z.boolean(),sidebarStartsOpen:$.z.boolean(),themeId:$.z.string(),uiTypefaceId:$.z.string()}),pi=$.z.enum(["bold","regular","light","italic","black","semibold","semibolditalic","bolditalic","medium"]),mi=$.z.object({id:$.z.string(),key:$.z.string(),original:$.z.string().nullable(),style:pi}),fi=$.z.object({id:$.z.string(),name:$.z.string(),author:$.z.string().nullable(),createdAt:$.z.string(),default:$.z.boolean(),fonts:$.z.record(mi)}),gi=$.z.record(fi),hi=$.z.union([$.z.boolean(),$.z.number(),$.z.string()]),zi=$.z.record(hi),bi=$.z.object({backgroundColor:$.z.string().optional()});ci($.z.object({theme:ci(ui),typefaces:gi,featureFlags:zi,block:bi}));var _i=n(1120);function yi(t,e,n,i){return e.addEventListener(t,n,i),()=>{e.removeEventListener(t,n,i)}}const vi=new Map,$i=new Map,xi="ItemRenderingContext";function wi(t,e){vi.set(t.id,e)}function ki(t){return vi.get(t.id)}function Si(t){vi.delete(t.id)}function Ii(t,e){$i.set(t.id,e)}function Ai(t){return $i.get(t.id)}function Ci(t){$i.delete(t.id)}const ji={left:(1-Math.SQRT1_2)/2,top:(1-Math.SQRT1_2)/2,width:Math.SQRT1_2,height:Math.SQRT1_2},Ei={discriminator:"ellipse",clipPath(t,{width:e,height:n}){let i="m 0 0";return i+=` m ${e} ${n/2}`,i+=` a ${e/2} ${n/2} 0 0 1 ${-e},0`,i+=` a ${e/2} ${n/2} 0 0 1 ${e},0`,i+=" z",i},textExtents:t=>ji};function Mi(t,e,n){return e<t?t:e>n?n:e}function Li({fromPoint:t,fromValue:e,toPoint:n,toValue:i},o){const a=(o-e)/(i-e),r=1-a;return{x:t.x*r+n.x*a,y:t.y*r+n.y*a}}const{min:Pi,max:Ri}=Math,Ti={left:0,top:0,width:1,height:1},Vi={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0};function Fi(t,e,n){return t+n<=e?t:t*e/(t+n)}function Hi(t,e,n,i,o){return Pi(Fi(n,e,t),Fi(n,i,o))}function Bi({topLeft:t,topRight:e,bottomRight:n,bottomLeft:i},{width:o,height:a}){return{topLeft:Hi(i,a,t,o,e),topRight:Hi(t,o,e,a,n),bottomRight:Hi(e,a,n,o,i),bottomLeft:Hi(n,o,i,a,t)}}function Yi(t){if(!t)return!0;const{topLeft:e,topRight:n,bottomRight:i,bottomLeft:o}=t;return e===n&&e===i&&e===o}function Ni({width:t,height:e}){return[{fromPoint:{x:0,y:0},fromValue:0,toPoint:{x:10,y:10},toValue:10},{fromPoint:{x:t,y:0},fromValue:0,toPoint:{x:t-10,y:10},toValue:10},{fromPoint:{x:t,y:e},fromValue:0,toPoint:{x:t-10,y:e-10},toValue:10},{fromPoint:{x:0,y:e},fromValue:0,toPoint:{x:10,y:e-10},toValue:10}]}const Oi={discriminator:"rectangle",clipPath({borderRadius:t},e){const{width:n,height:i}=e;let o="m 0 0";if(t){const{topLeft:a,topRight:r,bottomRight:s,bottomLeft:l}=Bi(t,e);o+=` m ${a} 0`,o+=` l ${n-a-r} 0 a ${r} ${r} 0 0 1 ${r},${r}`,o+=` l 0 ${i-r-s} a ${s} ${s} 0 0 1 ${-s},${s}`,o+=` l ${s+l-n} 0 a ${l} ${l} 0 0 1 ${-l},${-l}`,o+=` l 0 ${l+a-i} a ${a} ${a} 0 0 1 ${a},${-a}`}else o+=` l ${n} 0`,o+=` l 0 ${i}`,o+=` l ${-n} 0`,o+=" l 0 "+-i;return o+=" z",o},textExtents:t=>Ti,getControlPoints({borderRadius:t},e){const{topLeft:n,topRight:i,bottomRight:o,bottomLeft:a}=Bi(t??Vi,e),r=Ni(e),s=Yi(t)?"normal":"alternate",l=Pi(10,e.width/4,e.height/4);return[n,i,o,a].map(((t,e)=>({position:Li(r[e],Ri(t,l)),style:s})))},dragControlPoint({borderRadius:t},e,n,i){const o=Ni(e)[n],{width:a,height:r}=e,s=function({fromPoint:t,fromValue:e,toPoint:n,toValue:i},o){const a=o.x-t.x,r=o.y-t.y,s=n.x-t.x,l=n.y-t.y,d=(a*s+r*l)/(s*s+l*l);return(1-d)*e+d*i}(o,i);let l;if(Yi(t)){const t=Mi(0,s,Pi(r/2,a/2));l={topLeft:t,topRight:t,bottomRight:t,bottomLeft:t}}else switch(l={...t??Vi},n){case 0:l.topLeft=Mi(0,s,Pi(r-l.bottomLeft,a-l.topRight));break;case 1:l.topRight=Mi(0,s,Pi(a-l.topLeft,r-l.bottomRight));break;case 2:l.bottomRight=Mi(0,s,Pi(r-l.topRight,a-l.bottomLeft));break;case 3:l.bottomLeft=Mi(0,s,Pi(a-l.bottomRight,r-l.topLeft))}return{type:"rectangle",borderRadius:l}}},qi=new Map;function Ui(t){qi.set(t.discriminator,t)}function Di(t,e){return qi.get(t.type).clipPath(t,e)}Ui(Oi),Ui(Ei);var Xi=n(4015),Wi=n.n(Xi);function Ki(t,e,n=Object.keys(t.states.default)){const i=t.states.default,o=structuredClone(t.states[e]);return n.reduce(((t,e)=>(Wi()(t[e])&&(t[e]=structuredClone(i[e])),t)),o)}const{Map:Qi}=i.globals;function Zi(t,e,n){const i=t.slice();return i[2]=e[n],i}function Gi(t,e){let n,o;return{key:t,first:null,c(){n=(0,i.element)("link"),(0,i.attr)(n,"rel","prefetch"),(0,i.attr)(n,"href",o=v(e[2])),(0,i.attr)(n,"as","image"),this.first=n},m(t,e){(0,i.insert)(t,n,e)},p(t,a){e=t,1&a&&o!==(o=v(e[2]))&&(0,i.attr)(n,"href",o)},d(t){t&&(0,i.detach)(n)}}}function Ji(t){let e,n=[],o=new Qi,a=(0,i.ensure_array_like)(t[0].values());const r=t=>t[2].id;for(let e=0;e<a.length;e+=1){let i=Zi(t,a,e),s=r(i);o.set(s,n[e]=Gi(s,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=(0,i.empty)()},m(t,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(document.head,null);(0,i.append)(document.head,e)},p(t,[s]){1&s&&(a=(0,i.ensure_array_like)(t[0].values()),n=(0,i.update_keyed_each)(n,s,r,1,t,a,o,e.parentNode,i.destroy_block,Gi,e,Zi))},i:i.noop,o:i.noop,d(t){for(let t=0;t<n.length;t+=1)n[t].d();(0,i.detach)(e)}}}function to(t,e,n){let i,{items:o}=e;return t.$$set=t=>{"items"in t&&n(1,o=t.items)},t.$$.update=()=>{2&t.$$.dirty&&n(0,i=new Map(o.flatMap((t=>Object.values(t.assets??{}))).map((t=>[t.id,t]))))},[i,o]}class eo extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,to,Ji,i.safe_not_equal,{items:1})}}const no=eo;function io(t){(0,i.append_styles)(t,"svelte-1h2ri7t","svg.mondrian__border-2E5H6C{position:absolute;pointer-events:none}svg.mondrian__border-2E5H6C path{fill:none;stroke-linecap:round}")}function oo(t){let e,n,o,a,r;return{c(){e=(0,i.svg_element)("svg"),n=(0,i.svg_element)("path"),(0,i.attr)(n,"stroke-width",t[3]),(0,i.attr)(n,"stroke",o=t[2].color),(0,i.attr)(n,"stroke-dasharray",t[4]),(0,i.attr)(n,"d",t[5]),(0,i.attr)(e,"class","mondrian__border-2E5H6C"),(0,i.attr)(e,"viewBox",t[7]),(0,i.attr)(e,"width",a=t[0].value+t[3]),(0,i.attr)(e,"height",r=t[1].value+t[3]),(0,i.set_style)(e,"inset",t[6]),(0,i.set_style)(e,"opacity",t[2].opacity)},m(t,o){(0,i.insert)(t,e,o),(0,i.append)(e,n)},p(t,s){8&s&&(0,i.attr)(n,"stroke-width",t[3]),4&s&&o!==(o=t[2].color)&&(0,i.attr)(n,"stroke",o),16&s&&(0,i.attr)(n,"stroke-dasharray",t[4]),32&s&&(0,i.attr)(n,"d",t[5]),128&s&&(0,i.attr)(e,"viewBox",t[7]),9&s&&a!==(a=t[0].value+t[3])&&(0,i.attr)(e,"width",a),10&s&&r!==(r=t[1].value+t[3])&&(0,i.attr)(e,"height",r),64&s&&(0,i.set_style)(e,"inset",t[6]),4&s&&(0,i.set_style)(e,"opacity",t[2].opacity)},d(t){t&&(0,i.detach)(e)}}}function ao(t){let e,n=t[2].applied&&oo(t);return{c(){n&&n.c(),e=(0,i.empty)()},m(t,o){n&&n.m(t,o),(0,i.insert)(t,e,o)},p(t,[i]){t[2].applied?n?n.p(t,i):(n=oo(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),n&&n.d(t)}}}function ro(t,e,n){let i,o,a,r,s,l,d,c,{width:u}=e,{height:p}=e,{border:m}=e,{clipDef:f}=e;return t.$$set=t=>{"width"in t&&n(0,u=t.width),"height"in t&&n(1,p=t.height),"border"in t&&n(2,m=t.border),"clipDef"in t&&n(8,f=t.clipDef)},t.$$.update=()=>{1&t.$$.dirty&&n(10,i=u.value),2&t.$$.dirty&&n(9,o=p.value),4&t.$$.dirty&&n(3,a=m.width.value),8&t.$$.dirty&&n(11,r=a/2),1544&t.$$.dirty&&n(7,s=`0 0 ${i+a} ${o+a}`),2048&t.$$.dirty&&n(6,l=`${-r}px auto auto ${-r}px`),3840&t.$$.dirty&&n(5,d=`M ${r} ${r} `+Di(f,{width:i,height:o})),12&t.$$.dirty&&n(4,c="dashed"===m.style?`${2*a} ${2*a}`:"dotted"===m.style?"0 "+2*a:void 0)},[u,p,m,a,c,d,l,s,f,o,i,r]}class so extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,ro,ao,i.safe_not_equal,{width:0,height:1,border:2,clipDef:8},io)}}const lo=so;function co(t){(0,i.append_styles)(t,"svelte-1i62r4",".mondrian__mon-clip-path-3q3EXx{position:absolute;inset:0}")}function uo(t){let e,n;const o=t[5].default,a=(0,i.create_slot)(o,t,t[4],null);return{c(){e=(0,i.element)("div"),a&&a.c(),(0,i.attr)(e,"class","mondrian__mon-clip-path-3q3EXx"),(0,i.toggle_class)(e,"--ellipse","ellipse"===t[0].type),(0,i.set_style)(e,"clip-path",t[1])},m(t,o){(0,i.insert)(t,e,o),a&&a.m(e,null),n=!0},p(t,[r]){a&&a.p&&(!n||16&r)&&(0,i.update_slot_base)(a,o,t,t[4],n?(0,i.get_slot_changes)(o,t[4],r,null):(0,i.get_all_dirty_from_scope)(t[4]),null),(!n||1&r)&&(0,i.toggle_class)(e,"--ellipse","ellipse"===t[0].type),2&r&&(0,i.set_style)(e,"clip-path",t[1])},i(t){n||((0,i.transition_in)(a,t),n=!0)},o(t){(0,i.transition_out)(a,t),n=!1},d(t){t&&(0,i.detach)(e),a&&a.d(t)}}}function po(t,e,n){let i,{$$slots:o={},$$scope:a}=e,{clipDef:r}=e,{width:s}=e,{height:l}=e;return t.$$set=t=>{"clipDef"in t&&n(0,r=t.clipDef),"width"in t&&n(2,s=t.width),"height"in t&&n(3,l=t.height),"$$scope"in t&&n(4,a=t.$$scope)},t.$$.update=()=>{13&t.$$.dirty&&n(1,i=`path("${Di(r,{width:s,height:l})}")`)},[r,i,s,l,a,o]}class mo extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,po,uo,i.safe_not_equal,{clipDef:0,width:2,height:3},co)}}const fo=mo;function go(t){(0,i.append_styles)(t,"svelte-ph7izn",".mondrian__fill-3YgXmV{position:absolute;inset:0;transition:inherit;border-radius:inherit}.mondrian__fill-image-3rWCtq{overflow:hidden}.mondrian__fill-image-3rWCtq .mondrian__image-10_BMd{background-size:100% 100%}")}function ho(t){let e,n,o,a=100*t[1].crop.width+"%",r=100*t[1].crop.height+"%",s=`translate(${(50*(1-t[1].crop.width)+100*t[1].crop.left)/t[1].crop.width}%, ${(50*(1-t[1].crop.height)+100*t[1].crop.top)/t[1].crop.height}%`;return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),(0,i.attr)(n,"class","mondrian__image-10_BMd"),(0,i.attr)(n,"role",o=t[0]&&"img"),(0,i.attr)(n,"aria-label",t[0]),(0,i.set_style)(n,"background-image",t[2]),(0,i.set_style)(n,"opacity",t[1].opacity),(0,i.set_style)(n,"width",a),(0,i.set_style)(n,"height",r),(0,i.set_style)(n,"transform",s),(0,i.attr)(e,"class","mondrian__fill-3YgXmV mondrian__fill-image-3rWCtq")},m(t,o){(0,i.insert)(t,e,o),(0,i.append)(e,n)},p(t,e){1&e&&o!==(o=t[0]&&"img")&&(0,i.attr)(n,"role",o),1&e&&(0,i.attr)(n,"aria-label",t[0]),4&e&&(0,i.set_style)(n,"background-image",t[2]),2&e&&(0,i.set_style)(n,"opacity",t[1].opacity),2&e&&a!==(a=100*t[1].crop.width+"%")&&(0,i.set_style)(n,"width",a),2&e&&r!==(r=100*t[1].crop.height+"%")&&(0,i.set_style)(n,"height",r),2&e&&s!==(s=`translate(${(50*(1-t[1].crop.width)+100*t[1].crop.left)/t[1].crop.width}%, ${(50*(1-t[1].crop.height)+100*t[1].crop.top)/t[1].crop.height}%`)&&(0,i.set_style)(n,"transform",s)},d(t){t&&(0,i.detach)(e)}}}function zo(t){let e;return{c(){e=(0,i.element)("div"),(0,i.attr)(e,"class","mondrian__fill-3YgXmV fill-color"),(0,i.set_style)(e,"background-color",t[1].color),(0,i.set_style)(e,"opacity",t[1].opacity)},m(t,n){(0,i.insert)(t,e,n)},p(t,n){2&n&&(0,i.set_style)(e,"background-color",t[1].color),2&n&&(0,i.set_style)(e,"opacity",t[1].opacity)},d(t){t&&(0,i.detach)(e)}}}function bo(t){let e;function n(t,e){return"color"===t[1].type?zo:"image"===t[1].type?ho:void 0}let o=n(t),a=o&&o(t);return{c(){a&&a.c(),e=(0,i.empty)()},m(t,n){a&&a.m(t,n),(0,i.insert)(t,e,n)},p(t,[i]){o===(o=n(t))&&a?a.p(t,i):(a&&a.d(1),a=o&&o(t),a&&(a.c(),a.m(e.parentNode,e)))},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),a&&a.d(t)}}}function _o(t,e,n){let i,{altText:o}=e,{assets:a}=e,{fill:r}=e;return t.$$set=t=>{"altText"in t&&n(0,o=t.altText),"assets"in t&&n(3,a=t.assets),"fill"in t&&n(1,r=t.fill)},t.$$.update=()=>{10&t.$$.dirty&&n(2,i="image"===r.type&&a?.[r.assetId]?`url("${v(a?.[r.assetId])}")`:null)},[o,r,i,a]}class yo extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,_o,bo,i.safe_not_equal,{altText:0,assets:3,fill:1},go)}}const vo=yo;function $o(t){(0,i.append_styles)(t,"svelte-uspc47",".mondrian__mon-audio-wrapper-1N0BNV{position:absolute;inset:0}audio.mondrian__mon-item-audio-19T-ps{pointer-events:initial;object-fit:cover;width:100%;height:100%}")}function xo(t){let e,n,o,a;return{c(){e=(0,i.element)("audio"),(0,i.attr)(e,"class","mondrian__mon-item-audio-19T-ps"),(0,i.src_url_equal)(e.src,n=t[3])||(0,i.attr)(e,"src",n),e.controls=!0},m(n,r){(0,i.insert)(n,e,r),t[7](e),o||(a=[(0,i.listen)(e,"play",t[4]),(0,i.listen)(e,"pause",t[5]),(0,i.listen)(e,"ended",t[6])],o=!0)},p(t,o){8&o&&!(0,i.src_url_equal)(e.src,n=t[3])&&(0,i.attr)(e,"src",n)},d(n){n&&(0,i.detach)(e),t[7](null),o=!1,(0,i.run_all)(a)}}}function wo(t){let e,n,o=t[1],a=xo(t);return{c(){e=(0,i.element)("div"),a.c(),(0,i.attr)(e,"class","mondrian__mon-audio-wrapper-1N0BNV"),(0,i.attr)(e,"data-item-id",n=t[0].id)},m(t,n){(0,i.insert)(t,e,n),a.m(e,null)},p(t,[r]){2&r&&(0,i.safe_not_equal)(o,o=t[1])?(a.d(1),a=xo(t),a.c(),a.m(e,null)):a.p(t,r),1&r&&n!==(n=t[0].id)&&(0,i.attr)(e,"data-item-id",n)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),a.d(t)}}}function ko(t,e,n){let o,a,{item:r}=e,{stateId:s}=e;function l(t){a.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:{itemId:r.id}}))}return(0,b.onDestroy)((()=>{a&&Ci(r)})),t.$$set=t=>{"item"in t&&n(0,r=t.item),"stateId"in t&&n(1,s=t.stateId)},t.$$.update=()=>{if(3&t.$$.dirty){const t=(r.states[s].audioSources??r.states.default.audioSources).default,e=t&&r.assets?.[t];n(3,o=e?v(e):void 0)}5&t.$$.dirty&&a&&Ii(r,a)},[r,s,a,o,function(){l(ft)},function(){l(gt)},function(){l(ht)},function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{a=t,n(2,a)}))}]}class So extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,ko,wo,i.safe_not_equal,{item:0,stateId:1},$o)}}const Io=So;function Ao(t){(0,i.append_styles)(t,"svelte-1nhg2c9",".mondrian__mon-item-mouse-trigger-2f2dTf{position:absolute;inset:0}.mondrian__mon-item-mouse-trigger-2f2dTf.mondrian__--visible-3hMjQT{pointer-events:initial}.mondrian__mon-item-mouse-trigger-2f2dTf.mondrian__--clickable-2-WSjW{cursor:pointer}")}function Co(t){let e,n;return e=new vo({props:{altText:t[3],assets:t[0].assets,fill:t[5]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};8&n&&(i.altText=t[3]),1&n&&(i.assets=t[0].assets),32&n&&(i.fill=t[5]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function jo(t){let e,n;return e=new vo({props:{assets:t[0].assets,fill:t[4]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};1&n&&(i.assets=t[0].assets),16&n&&(i.fill=t[4]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Eo(t){let e,n,o,a,r,s,l=null!=t[5]&&Co(t),d=null!=t[4]&&jo(t);return{c(){l&&l.c(),e=(0,i.space)(),d&&d.c(),n=(0,i.space)(),o=(0,i.element)("div"),(0,i.attr)(o,"class","mondrian__mon-item-mouse-trigger-2f2dTf"),(0,i.attr)(o,"role",a=t[2]?"button":void 0),(0,i.attr)(o,"tabindex",r=t[2]?0:void 0),(0,i.toggle_class)(o,"mondrian__--visible-3hMjQT",t[1]),(0,i.toggle_class)(o,"mondrian__--clickable-2-WSjW",t[2])},m(t,a){l&&l.m(t,a),(0,i.insert)(t,e,a),d&&d.m(t,a),(0,i.insert)(t,n,a),(0,i.insert)(t,o,a),s=!0},p(t,c){null!=t[5]?l?(l.p(t,c),32&c&&(0,i.transition_in)(l,1)):(l=Co(t),l.c(),(0,i.transition_in)(l,1),l.m(e.parentNode,e)):l&&((0,i.group_outros)(),(0,i.transition_out)(l,1,1,(()=>{l=null})),(0,i.check_outros)()),null!=t[4]?d?(d.p(t,c),16&c&&(0,i.transition_in)(d,1)):(d=jo(t),d.c(),(0,i.transition_in)(d,1),d.m(n.parentNode,n)):d&&((0,i.group_outros)(),(0,i.transition_out)(d,1,1,(()=>{d=null})),(0,i.check_outros)()),(!s||4&c&&a!==(a=t[2]?"button":void 0))&&(0,i.attr)(o,"role",a),(!s||4&c&&r!==(r=t[2]?0:void 0))&&(0,i.attr)(o,"tabindex",r),(!s||2&c)&&(0,i.toggle_class)(o,"mondrian__--visible-3hMjQT",t[1]),(!s||4&c)&&(0,i.toggle_class)(o,"mondrian__--clickable-2-WSjW",t[2])},i(t){s||((0,i.transition_in)(l),(0,i.transition_in)(d),s=!0)},o(t){(0,i.transition_out)(l),(0,i.transition_out)(d),s=!1},d(t){t&&((0,i.detach)(e),(0,i.detach)(n),(0,i.detach)(o)),l&&l.d(t),d&&d.d(t)}}}function Mo(t){let e,n;return e=new fo({props:{clipDef:t[8],width:t[7],height:t[6],$$slots:{default:[Eo]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,[n]){const i={};256&n&&(i.clipDef=t[8]),128&n&&(i.width=t[7]),64&n&&(i.height=t[6]),4159&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Lo(t,e,n){let i,o,a,r,s,l,d,c,{item:u}=e,{stateId:p}=e,{visible:m}=e,{clickable:f=!1}=e;return t.$$set=t=>{"item"in t&&n(0,u=t.item),"stateId"in t&&n(9,p=t.stateId),"visible"in t&&n(1,m=t.visible),"clickable"in t&&n(2,f=t.clickable)},t.$$.update=()=>{1&t.$$.dirty&&n(11,i=u.states.default),513&t.$$.dirty&&n(10,o=u.states[p]),3072&t.$$.dirty&&n(8,a=o.clipDef??i.clipDef),3072&t.$$.dirty&&n(7,r=o.width?.value??i.width.value),3072&t.$$.dirty&&n(6,s=o.height?.value??i.height.value),3072&t.$$.dirty&&n(5,l=o.fill??i.fill),3072&t.$$.dirty&&n(4,d=o.overlay??i.overlay),1024&t.$$.dirty&&n(3,c="altText"in o?o.altText??void 0:void 0)},[u,m,f,c,d,l,s,r,a,p,o,i]}class Po extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Lo,Mo,i.safe_not_equal,{item:0,stateId:9,visible:1,clickable:2},Ao)}}const Ro=Po;function To(t){(0,i.append_styles)(t,"svelte-11xtlh8",".mondrian__mon-item-transform-35_L4P{position:absolute;pointer-events:none}.mondrian__mon-item-transform-35_L4P.mondrian__--smooth-transitions-1R_oNu{transition:all 100ms ease}")}function Vo(t){let e,n,o,a=`${t[8]}px`,r=`${t[7]}px`,s=`translate(${t[6]}px, ${t[5]}px) rotate(${t[2]}deg) scale(${t[4]?-1:1}, ${t[3]?-1:1})`;const l=t[15].default,d=(0,i.create_slot)(l,t,t[14],null);return{c(){e=(0,i.element)("div"),d&&d.c(),(0,i.attr)(e,"class","mondrian__mon-item-transform-35_L4P"),(0,i.attr)(e,"data-item-id",n=t[0].id.slice(0,5)),(0,i.toggle_class)(e,"mondrian__--smooth-transitions-1R_oNu",t[9]),(0,i.set_style)(e,"width",a),(0,i.set_style)(e,"height",r),(0,i.set_style)(e,"transform",s),(0,i.set_style)(e,"z-index",t[1])},m(t,n){(0,i.insert)(t,e,n),d&&d.m(e,null),o=!0},p(t,[c]){d&&d.p&&(!o||16384&c)&&(0,i.update_slot_base)(d,l,t,t[14],o?(0,i.get_slot_changes)(l,t[14],c,null):(0,i.get_all_dirty_from_scope)(t[14]),null),(!o||1&c&&n!==(n=t[0].id.slice(0,5)))&&(0,i.attr)(e,"data-item-id",n),256&c&&a!==(a=`${t[8]}px`)&&(0,i.set_style)(e,"width",a),128&c&&r!==(r=`${t[7]}px`)&&(0,i.set_style)(e,"height",r),124&c&&s!==(s=`translate(${t[6]}px, ${t[5]}px) rotate(${t[2]}deg) scale(${t[4]?-1:1}, ${t[3]?-1:1})`)&&(0,i.set_style)(e,"transform",s),2&c&&(0,i.set_style)(e,"z-index",t[1])},i(t){o||((0,i.transition_in)(d,t),o=!0)},o(t){(0,i.transition_out)(d,t),o=!1},d(t){t&&(0,i.detach)(e),d&&d.d(t)}}}function Fo(t,e,n){let i,o,a,r,s,l,d,c,{$$slots:u={},$$scope:p}=e,{item:m}=e,{stateId:f}=e,{zIndex:g}=e;const h=!(m.parentId===m.blockumentId)&&y();let z,b;return t.$$set=t=>{"item"in t&&n(0,m=t.item),"stateId"in t&&n(10,f=t.stateId),"zIndex"in t&&n(1,g=t.zIndex),"$$scope"in t&&n(14,p=t.$$scope)},t.$$.update=()=>{if(1&t.$$.dirty&&n(12,i=m.states.default),1025&t.$$.dirty&&n(13,o=m.states[f]),12288&t.$$.dirty&&n(8,a=(o.width??i.width).value),12288&t.$$.dirty&&n(7,r=(o.height??i.height).value),12288&t.$$.dirty&&n(6,s=i.x.value+(o.xOffset??0)),12288&t.$$.dirty&&n(5,l=i.y.value+(o.yOffset??0)),14340&t.$$.dirty){const t=o.rotation??i.rotation;if(null==z)n(2,b=t);else if(t!==z){let e=t-z;e>180?e-=360:e<=-180&&(e+=360),n(2,b+=e)}n(11,z=t)}12288&t.$$.dirty&&n(4,d=o.flipX??i.flipX),12288&t.$$.dirty&&n(3,c=o.flipY??i.flipY)},[m,g,b,c,d,l,s,r,a,h,f,z,i,o,p,u]}class Ho extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Fo,Vo,i.safe_not_equal,{item:0,stateId:10,zIndex:1},To)}}const Bo=Ho;var Yo=n(3948);function No(t){(0,i.append_styles)(t,"svelte-15oexdl",".mondrian__text-item-clip-3W8l4a{position:absolute;inset:0}.mondrian__text-item-clip-boundary-1Awcel{position:absolute}.mondrian__text-item-padding-boundary-1PQhi5{position:absolute;inset:0;--runoff-area:-50px}.mondrian__--padded-2F8Hsf.mondrian__text-item-padding-boundary-1PQhi5{inset:16px}.mondrian__--padded-2F8Hsf.mondrian__text-item-padding-boundary-1PQhi5.mondrian__--small-37Hevy{left:8px;right:8px}.mondrian__--padded-2F8Hsf.mondrian__text-item-padding-boundary-1PQhi5.mondrian__--large-IGC0Ql{left:32px;right:32px}.mondrian__text-item-padding-boundary-1PQhi5[data-vertical-align='top']{bottom:var(--runoff-area);--text-item-vertical-align:start}.mondrian__text-item-padding-boundary-1PQhi5[data-vertical-align='middle']{top:var(--runoff-area);bottom:var(--runoff-area);--text-item-vertical-align:center}.mondrian__text-item-padding-boundary-1PQhi5[data-vertical-align='bottom']{top:var(--runoff-area);--text-item-vertical-align:end}.mondrian__text-item-padding-boundary-1PQhi5 .tiptap{align-content:var(--text-item-vertical-align)}")}function Oo(t){let e,n,o,a,r,s=`calc(${t[2].left} * 100%)`,l=`calc(${t[2].top} * 100%)`,d=`calc(${t[2].width} * 100%)`,c=`calc(${t[2].height} * 100%)`;const u=t[6].default,p=(0,i.create_slot)(u,t,t[5],null);return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),o=(0,i.element)("div"),p&&p.c(),(0,i.attr)(o,"class","mondrian__text-item-padding-boundary-1PQhi5"),(0,i.attr)(o,"data-vertical-align",a=t[1].textVerticalAlign),(0,i.toggle_class)(o,"mondrian__--small-37Hevy",t[3]<=100),(0,i.toggle_class)(o,"mondrian__--large-IGC0Ql",t[3]>300),(0,i.toggle_class)(o,"mondrian__--padded-2F8Hsf","shape"===t[0].type),(0,i.attr)(n,"class","mondrian__text-item-clip-boundary-1Awcel"),(0,i.set_style)(n,"left",s),(0,i.set_style)(n,"top",l),(0,i.set_style)(n,"width",d),(0,i.set_style)(n,"height",c),(0,i.attr)(e,"class","mondrian__text-item-clip-3W8l4a")},m(t,a){(0,i.insert)(t,e,a),(0,i.append)(e,n),(0,i.append)(n,o),p&&p.m(o,null),r=!0},p(t,[e]){p&&p.p&&(!r||32&e)&&(0,i.update_slot_base)(p,u,t,t[5],r?(0,i.get_slot_changes)(u,t[5],e,null):(0,i.get_all_dirty_from_scope)(t[5]),null),(!r||2&e&&a!==(a=t[1].textVerticalAlign))&&(0,i.attr)(o,"data-vertical-align",a),(!r||8&e)&&(0,i.toggle_class)(o,"mondrian__--small-37Hevy",t[3]<=100),(!r||8&e)&&(0,i.toggle_class)(o,"mondrian__--large-IGC0Ql",t[3]>300),(!r||1&e)&&(0,i.toggle_class)(o,"mondrian__--padded-2F8Hsf","shape"===t[0].type),4&e&&s!==(s=`calc(${t[2].left} * 100%)`)&&(0,i.set_style)(n,"left",s),4&e&&l!==(l=`calc(${t[2].top} * 100%)`)&&(0,i.set_style)(n,"top",l),4&e&&d!==(d=`calc(${t[2].width} * 100%)`)&&(0,i.set_style)(n,"width",d),4&e&&c!==(c=`calc(${t[2].height} * 100%)`)&&(0,i.set_style)(n,"height",c)},i(t){r||((0,i.transition_in)(p,t),r=!0)},o(t){(0,i.transition_out)(p,t),r=!1},d(t){t&&(0,i.detach)(e),p&&p.d(t)}}}function qo(t,e,n){let i,o,a,{$$slots:r={},$$scope:s}=e,{item:l}=e,{stateId:d}=e;return t.$$set=t=>{"item"in t&&n(0,l=t.item),"stateId"in t&&n(4,d=t.stateId),"$$scope"in t&&n(5,s=t.$$scope)},t.$$.update=()=>{var e;17&t.$$.dirty&&n(1,i=Ki(l,d)),2&t.$$.dirty&&n(3,o=i.width.value),2&t.$$.dirty&&n(2,(e=i.clipDef,a=qi.get(e.type).textExtents(e)))},[l,i,a,o,d,s,r]}class Uo extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,qo,Oo,i.safe_not_equal,{item:0,stateId:4},No)}}const Do=Uo;function Xo(t){(0,i.append_styles)(t,"svelte-16jaz98",".mondrian__content-wrapper-YDBsV{height:100%}.mondrian__content-1sMUPZ p:empty{min-height:1lh}.mondrian__content-1sMUPZ{word-wrap:break-word;white-space:pre-wrap;white-space:break-spaces;font-variant-ligatures:none;font-feature-settings:'liga' 0}")}function Wo(t){let e,n,o,a=(0,Yo.Z)(t[2],li)+"";return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),(0,i.attr)(n,"class","tiptap ProseMirror mondrian__content-1sMUPZ"),(0,i.attr)(e,"class",o=ba+" mondrian__content-wrapper-YDBsV")},m(t,o){(0,i.insert)(t,e,o),(0,i.append)(e,n),n.innerHTML=a},p(t,e){4&e&&a!==(a=(0,Yo.Z)(t[2],li)+"")&&(n.innerHTML=a)},d(t){t&&(0,i.detach)(e)}}}function Ko(t){let e,n;return e=new Do({props:{item:t[0],stateId:t[1],$$slots:{default:[Wo]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,[n]){const i={};1&n&&(i.item=t[0]),2&n&&(i.stateId=t[1]),12&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Qo(t,e,n){let i,{item:o}=e,{stateId:a}=e;return t.$$set=t=>{"item"in t&&n(0,o=t.item),"stateId"in t&&n(1,a=t.stateId)},t.$$.update=()=>{3&t.$$.dirty&&n(2,i=o.states[a].text?.json??o.states.default.text.json)},[o,a,i]}class Zo extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Qo,Ko,i.safe_not_equal,{item:0,stateId:1},Xo)}}const Go=Zo;function Jo(t){(0,i.append_styles)(t,"svelte-vg4dc1",".mondrian__mon-video-wrapper-37dPyY{position:absolute;inset:0}video.mondrian__mon-item-video-1Wv5W4{pointer-events:initial;object-fit:cover;width:100%;height:100%}")}function ta(t){let e,n,o,a;return{c(){e=(0,i.element)("video"),(0,i.attr)(e,"class","mondrian__mon-item-video-1Wv5W4"),(0,i.src_url_equal)(e.src,n=t[3])||(0,i.attr)(e,"src",n),e.controls=!0},m(n,r){(0,i.insert)(n,e,r),t[7](e),o||(a=[(0,i.listen)(e,"play",t[4]),(0,i.listen)(e,"pause",t[5]),(0,i.listen)(e,"ended",t[6])],o=!0)},p(t,o){8&o&&!(0,i.src_url_equal)(e.src,n=t[3])&&(0,i.attr)(e,"src",n)},d(n){n&&(0,i.detach)(e),t[7](null),o=!1,(0,i.run_all)(a)}}}function ea(t){let e,n,o=t[1],a=ta(t);return{c(){e=(0,i.element)("div"),a.c(),(0,i.attr)(e,"class","mondrian__mon-video-wrapper-37dPyY"),(0,i.attr)(e,"data-item-id",n=t[0].id)},m(t,n){(0,i.insert)(t,e,n),a.m(e,null)},p(t,[r]){2&r&&(0,i.safe_not_equal)(o,o=t[1])?(a.d(1),a=ta(t),a.c(),a.m(e,null)):a.p(t,r),1&r&&n!==(n=t[0].id)&&(0,i.attr)(e,"data-item-id",n)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),a.d(t)}}}function na(t,e,n){let o,a,{item:r}=e,{stateId:s}=e;function l(t){a.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:{itemId:r.id}}))}return(0,b.onDestroy)((()=>{a&&Si(r)})),t.$$set=t=>{"item"in t&&n(0,r=t.item),"stateId"in t&&n(1,s=t.stateId)},t.$$.update=()=>{if(3&t.$$.dirty){const t=(r.states[s].videoSources??r.states.default.videoSources).default,e=t&&r.assets?.[t];n(3,o=e?v(e):void 0)}5&t.$$.dirty&&a&&wi(r,a)},[r,s,a,o,function(){l(ft)},function(){l(gt)},function(){l(ht)},function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{a=t,n(2,a)}))}]}class ia extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,na,ea,i.safe_not_equal,{item:0,stateId:1},Jo)}}const oa=ia;function aa(t){(0,i.append_styles)(t,"svelte-1xuhpbp",".mondrian__mon-item-2qYEoK{position:absolute;inset:0}.mondrian__mon-item-2qYEoK.mondrian__--smooth-transitions-fWIe80{transition:opacity 100ms ease}.mondrian__mon-item-2qYEoK.mondrian__--hidden-s36Wik{opacity:0}.mondrian__mon-item-children-3w5s3j{isolation:isolate}")}function ra(t,e,n){const i=t.slice();return i[21]=e[n],i[0]=n,i}function sa(t){let e,n,o=[],a=new Map,r=(0,i.ensure_array_like)(t[9]);const s=t=>t[21].id;for(let e=0;e<r.length;e+=1){let n=ra(t,r,e),i=s(n);a.set(i,o[e]=la(i,n))}return{c(){e=(0,i.element)("div");for(let t=0;t<o.length;t+=1)o[t].c();(0,i.attr)(e,"class","mondrian__mon-item-children-3w5s3j")},m(t,a){(0,i.insert)(t,e,a);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);n=!0},p(t,n){512&n&&(r=(0,i.ensure_array_like)(t[9]),(0,i.group_outros)(),o=(0,i.update_keyed_each)(o,n,s,1,t,r,a,e,i.outro_and_destroy_block,la,null,ra),(0,i.check_outros)())},i(t){if(!n){for(let t=0;t<r.length;t+=1)(0,i.transition_in)(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)(0,i.transition_out)(o[t]);n=!1},d(t){t&&(0,i.detach)(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function la(t,e){let n,o,a;return o=new ha({props:{itemId:e[21].id,index:e[0]}}),{key:t,first:null,c(){n=(0,i.empty)(),(0,i.create_component)(o.$$.fragment),this.first=n},m(t,e){(0,i.insert)(t,n,e),(0,i.mount_component)(o,t,e),a=!0},p(t,n){e=t;const i={};512&n&&(i.itemId=e[21].id),512&n&&(i.index=e[0]),o.$set(i)},i(t){a||((0,i.transition_in)(o.$$.fragment,t),a=!0)},o(t){(0,i.transition_out)(o.$$.fragment,t),a=!1},d(t){t&&(0,i.detach)(n),(0,i.destroy_component)(o,t)}}}function da(t){let e,n;return e=new Go({props:{item:t[8],stateId:t[4]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};256&n&&(i.item=t[8]),16&n&&(i.stateId=t[4]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function ca(t){let e,n;return e=new oa({props:{item:t[7],stateId:t[4]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};128&n&&(i.item=t[7]),16&n&&(i.stateId=t[4]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function ua(t){let e,n;return e=new Io({props:{item:t[6],stateId:t[4]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};64&n&&(i.item=t[6]),16&n&&(i.stateId=t[4]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function pa(t){let e,n,o,a,r,s,l,d,c,u,p,m,f,g;n=new Ro({props:{item:t[3],stateId:t[4],visible:t[11],clickable:t[5]}}),a=new lo({props:{width:t[2].width,height:t[2].height,border:t[2].border,clipDef:t[10]}});let h=t[9]&&sa(t),z=t[8]&&da(t),b=t[7]&&ca(t),_=t[6]&&ua(t);return{c(){e=(0,i.element)("div"),(0,i.create_component)(n.$$.fragment),o=(0,i.space)(),(0,i.create_component)(a.$$.fragment),r=(0,i.space)(),h&&h.c(),s=(0,i.space)(),z&&z.c(),l=(0,i.space)(),b&&b.c(),d=(0,i.space)(),_&&_.c(),(0,i.attr)(e,"class","mondrian__mon-item-2qYEoK"),e.inert=c=!t[11],(0,i.attr)(e,"aria-hidden",u=!t[11]),(0,i.toggle_class)(e,"mondrian__--smooth-transitions-fWIe80",t[17]),(0,i.toggle_class)(e,"mondrian__--hidden-s36Wik",!t[11])},m(c,u){(0,i.insert)(c,e,u),(0,i.mount_component)(n,e,null),(0,i.append)(e,o),(0,i.mount_component)(a,e,null),(0,i.append)(e,r),h&&h.m(e,null),(0,i.append)(e,s),z&&z.m(e,null),(0,i.append)(e,l),b&&b.m(e,null),(0,i.append)(e,d),_&&_.m(e,null),m=!0,f||(g=(0,i.action_destroyer)(p=t[12].call(null,e,{item:t[3],triggers:t[1]})),f=!0)},p(t,o){const r={};8&o&&(r.item=t[3]),16&o&&(r.stateId=t[4]),2048&o&&(r.visible=t[11]),32&o&&(r.clickable=t[5]),n.$set(r);const f={};4&o&&(f.width=t[2].width),4&o&&(f.height=t[2].height),4&o&&(f.border=t[2].border),1024&o&&(f.clipDef=t[10]),a.$set(f),t[9]?h?(h.p(t,o),512&o&&(0,i.transition_in)(h,1)):(h=sa(t),h.c(),(0,i.transition_in)(h,1),h.m(e,s)):h&&((0,i.group_outros)(),(0,i.transition_out)(h,1,1,(()=>{h=null})),(0,i.check_outros)()),t[8]?z?(z.p(t,o),256&o&&(0,i.transition_in)(z,1)):(z=da(t),z.c(),(0,i.transition_in)(z,1),z.m(e,l)):z&&((0,i.group_outros)(),(0,i.transition_out)(z,1,1,(()=>{z=null})),(0,i.check_outros)()),t[7]?b?(b.p(t,o),128&o&&(0,i.transition_in)(b,1)):(b=ca(t),b.c(),(0,i.transition_in)(b,1),b.m(e,d)):b&&((0,i.group_outros)(),(0,i.transition_out)(b,1,1,(()=>{b=null})),(0,i.check_outros)()),t[6]?_?(_.p(t,o),64&o&&(0,i.transition_in)(_,1)):(_=ua(t),_.c(),(0,i.transition_in)(_,1),_.m(e,null)):_&&((0,i.group_outros)(),(0,i.transition_out)(_,1,1,(()=>{_=null})),(0,i.check_outros)()),(!m||2048&o&&c!==(c=!t[11]))&&(e.inert=c),(!m||2048&o&&u!==(u=!t[11]))&&(0,i.attr)(e,"aria-hidden",u),p&&(0,i.is_function)(p.update)&&10&o&&p.update.call(null,{item:t[3],triggers:t[1]}),(!m||2048&o)&&(0,i.toggle_class)(e,"mondrian__--hidden-s36Wik",!t[11])},i(t){m||((0,i.transition_in)(n.$$.fragment,t),(0,i.transition_in)(a.$$.fragment,t),(0,i.transition_in)(h),(0,i.transition_in)(z),(0,i.transition_in)(b),(0,i.transition_in)(_),m=!0)},o(t){(0,i.transition_out)(n.$$.fragment,t),(0,i.transition_out)(a.$$.fragment,t),(0,i.transition_out)(h),(0,i.transition_out)(z),(0,i.transition_out)(b),(0,i.transition_out)(_),m=!1},d(t){t&&(0,i.detach)(e),(0,i.destroy_component)(n),(0,i.destroy_component)(a),h&&h.d(),z&&z.d(),b&&b.d(),_&&_.d(),f=!1,g()}}}function ma(t){let e,n;return e=new Bo({props:{item:t[3],stateId:t[4],zIndex:null!=t[0]?-t[0]:void 0,$$slots:{default:[pa]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,[n]){const i={};8&n&&(i.item=t[3]),16&n&&(i.stateId=t[4]),1&n&&(i.zIndex=null!=t[0]?-t[0]:void 0),8392702&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function fa({event:t}){return"click"===t}function ga(t,e,n){let o,a,r,s,l,d,c,u,p,m,f,g,{itemId:h}=e,{index:z}=e;const _=function(){const t=(0,b.getContext)(xi);if(!t)throw new Error("This component must be provided with an ItemRenderingContext");return t}(),{bindTriggers:v}=_,$=_.getItem(h);(0,i.component_subscribe)(t,$,(t=>n(3,p=t)));const x=_.getState(h);(0,i.component_subscribe)(t,x,(t=>n(4,f=t)));const w=_.getVisible(h);(0,i.component_subscribe)(t,w,(t=>n(11,g=t)));const k=_.getTriggersBySourceId();(0,i.component_subscribe)(t,k,(t=>n(19,m=t)));const S=y();return t.$$set=t=>{"itemId"in t&&n(18,h=t.itemId),"index"in t&&n(0,z=t.index)},t.$$.update=()=>{24&t.$$.dirty&&n(2,o=Ki(p,f)),4&t.$$.dirty&&n(10,a=o.clipDef),12&t.$$.dirty&&n(9,r="group"===p.type?o.children:void 0),8&t.$$.dirty&&n(8,s="shape"===p.type||"text"===p.type?p:void 0),8&t.$$.dirty&&n(7,l="video"===p.type?p:void 0),8&t.$$.dirty&&n(6,d="audio"===p.type?p:void 0),524296&t.$$.dirty&&n(1,c=m.get(p.id)??[]),2&t.$$.dirty&&n(5,u=c.some(fa))},[z,c,o,p,f,u,d,l,s,r,a,g,v,$,x,w,k,S,h,m]}class ha extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,ga,ma,i.safe_not_equal,{itemId:18,index:0},aa)}}const za=ha;i.SvelteComponent;const ba=h.b;(0,_i.writable)(!1);const _a=['input:not([type="checkbox"], [type="radio"])',"art-asset-library","textarea","[contenteditable]"].join(", ");var ya=n(9205);const va=n.n(ya)()("mondrian").extend("keyboard"),$a={activeModifierKeys:new Set,get alt(){return $a.activeModifierKeys.has("Alt")},get meta(){return $a.activeModifierKeys.has("Meta")||$a.activeModifierKeys.has("Control")},get shift(){return $a.activeModifierKeys.has("Shift")},key:void 0,get combo(){return[$a.meta&&"Meta",$a.alt&&"Alt",$a.shift&&"Shift",$a.key].filter(Boolean).join("+")}};function xa({metaKey:t,altKey:e,shiftKey:n,ctrlKey:i},o){let a=!1;return t!==o.has("Meta")&&(a=!0,t?o.add("Meta"):o.delete("Meta")),e!==o.has("Alt")&&(a=!0,e?o.add("Alt"):o.delete("Alt")),n!==o.has("Shift")&&(a=!0,n?o.add("Shift"):o.delete("Shift")),i!==o.has("Control")&&(a=!0,i?o.add("Control"):o.delete("Control")),a}let wa=!1;const ka={...(0,_i.readable)($a,(t=>{function e(e){const n="keydown"===e.type;xa(e,$a.activeModifierKeys),$a.key=n?e.key:void 0,t($a)}function n(e){xa(e,$a.activeModifierKeys)&&t($a)}wa||(wa=!0,window.addEventListener("keydown",e),window.addEventListener("keyup",e),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&($a.activeModifierKeys.clear(),$a.key=void 0,t($a))})),window.addEventListener("blur",(function(){$a.activeModifierKeys.clear(),$a.key=void 0,t($a)})),window.addEventListener("mousedown",n,{passive:!0,capture:!0}),window.addEventListener("mousemove",n,{passive:!0,capture:!0}))})),is:t=>($a.combo&&va(`comparing keycombos, store: ${$a.combo}, comparison: ${t}`),$a.combo.toLowerCase()===t.toLowerCase()),on(t,e){const n=n=>{!function(){const{activeElement:t}=document;return null!=t&&!!t.matches(_a)}()&&ka.is(t)&&(va("keyCombo matched, executing handler",t),e(n))};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}},Sa=((0,_i.derived)(ka,(t=>t.meta)),(0,_i.derived)(ka,(t=>t.alt)),(0,_i.derived)(ka,(t=>t.shift)),{down:!1,downX:-1,downY:-1,target:void 0,x:-1,y:-1}),Ia=((0,_i.readable)(Sa,(t=>{return window.addEventListener("mousedown",e),window.addEventListener("mousemove",i),window.addEventListener("mouseup",n),function(){window.removeEventListener("mousedown",e),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",n)};function e(t){Sa.down=!0,Sa.downX=Sa.x=t.clientX,Sa.downY=Sa.y=t.clientY,Sa.target=t.target,o()}function n(){Sa.down=!1,Sa.downX=Sa.x=Sa.downY=Sa.y=-1,Sa.target=void 0,o()}function i(t){Sa.x=t.x,Sa.y=t.y,o()}function o(){t(Sa)}})),"mondrian-suspense");n(2466),i.SvelteComponent,n(2732);var Aa=n(5494);const Ca={nw:"top-start",n:"top",ne:"top-end",sw:"bottom-start",s:"bottom",se:"bottom-end"},ja=new ResizeObserver(Ra);let Ea,Ma,La;function Pa(t){const e=function(t){for(let e=t;e;e=e.parentElement)if(e.classList.contains("mon-tooltip-anchor"))return e}(t.target);if(e===Ea)return;Ma&&(Ma.removeAttribute("data-active"),ja.unobserve(Ma));const n=e?.querySelector("[data-mon-tooltip]");if(!n||n.getAttribute("aria-hidden"))return Ea=void 0,void(Ma=void 0);n.setAttribute("data-active","true"),n.showPopover(),Ea=e,Ma=n,La=Ma.querySelector("[data-mon-tooltip-arrow]"),Ra(),ja.observe(Ma)}async function Ra(){if(Ea&&Ma){const{x:t,y:e,middlewareData:n}=await(0,Aa.rD)(Ea,Ma,{middleware:[(0,Aa.cY)(5),(0,Aa.UU)(),(0,Aa.BN)(),(0,Aa.UE)({element:La})],strategy:"fixed",placement:Ca[Ma.getAttribute("data-position")]});if(Ma.style.transform=`translate(${t}px,${e}px)`,n.arrow){const{x:t,y:e}=n.arrow;La.style.left=null!=t?`${t}px`:"",La.style.top=null!=e?`${e}px`:""}}}function Ta(t){(0,i.append_styles)(t,"svelte-1ooljvd",".mondrian__suspense-3tgPBN.mondrian__--loading-3irTkJ{visibility:hidden}")}document.addEventListener("mouseover",Pa,{passive:!0}),document.documentElement.addEventListener("mouseleave",Pa,{passive:!0}),document.addEventListener("scroll",Ra,{passive:!0,capture:!0}),i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,n(9777),i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent;const Va=t=>({isLoading:1&t}),Fa=t=>({isLoading:t[0]});function Ha(t){let e,n;const o=t[2].default,a=(0,i.create_slot)(o,t,t[1],Fa);return{c(){e=(0,i.element)("div"),a&&a.c(),(0,i.attr)(e,"class","mondrian__suspense-3tgPBN"),(0,i.toggle_class)(e,"mondrian__--loading-3irTkJ",t[0])},m(t,o){(0,i.insert)(t,e,o),a&&a.m(e,null),n=!0},p(t,[r]){a&&a.p&&(!n||3&r)&&(0,i.update_slot_base)(a,o,t,t[1],n?(0,i.get_slot_changes)(o,t[1],r,Va):(0,i.get_all_dirty_from_scope)(t[1]),Fa),(!n||1&r)&&(0,i.toggle_class)(e,"mondrian__--loading-3irTkJ",t[0])},i(t){n||((0,i.transition_in)(a,t),n=!0)},o(t){(0,i.transition_out)(a,t),n=!1},d(t){t&&(0,i.detach)(e),a&&a.d(t)}}}function Ba(t,e,n){let{$$slots:i={},$$scope:o}=e;const a=function(){const t=new Set;return(0,b.setContext)(Ia,t),t}();let r=!0;return(0,b.onMount)((()=>{Promise.all(a).then((()=>{n(0,r=!1)}))})),t.$$set=t=>{"$$scope"in t&&n(1,o=t.$$scope)},[r,o,i]}class Ya extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Ba,Ha,i.safe_not_equal,{},Ta)}}const Na=Ya;i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent;var Oa=n(4993),qa=n.n(Oa);const Ua=(t,{item:e,triggers:n})=>{function i(i,o={}){n.filter((t=>t.event===i)).forEach((n=>{!function(t,e,n){e.dispatchEvent(new CustomEvent("trigger",{detail:n,bubbles:!0}))}(0,t,{itemId:e.id,triggerId:n.id,...o})}))}const o=[...new Set(n.map((t=>t.event)))].map((e=>{switch(e){case"hover":{let n=!1;return[yi("mouseenter",t,(t=>{n||(n=!0,i(e,{hovered:n}))})),yi("mouseleave",t,(t=>{n&&(n=!1,i(e,{hovered:n}))}))]}case"click":return[yi("click",t,(t=>{i(e)})),yi("keyup",t,(t=>{["Space","Enter"].includes(t.code)&&t.target===document.activeElement&&i(e)}))];case ft:case gt:case ht:return yi(e,t,(t=>{i(e)}));default:return yi(e,t,(()=>{i(e)}))}})).flat(2).filter(Boolean);return{destroy(){o.forEach((t=>{t()}))}}},Da=(t,{items:e,currentStates:n,currentVisibles:i,triggers:o})=>{const a=De()(o,"sourceId"),r={[zt](t,i,o){const a="self"===t.targetId?o:e[t.targetId];!1===i.hovered?n.get(a.id)?.revert(t.targetState):n.get(a.id)?.set(t.targetState)},[bt](t,n,o){const a="self"===t.targetId?o:e[t.targetId];!1===n.hovered?i.get(a.id)?.set(!t.targetVisibility):i.get(a.id)?.set(t.targetVisibility)},[_t](t,n,i){const o="self"===t.targetId?i:e[t.targetId];if("video"===o.type){const t=ki(o);if(!t)return;t.pause()}else if("audio"===o.type){const t=Ai(o);if(!t)return;t.pause()}},[yt](t,n,i){const o="self"===t.targetId?i:e[t.targetId];if("video"===o.type){const t=ki(o);if(!t)return;t.play()}else if("audio"===o.type){const t=Ai(o);if(!t)return;t.play()}},[vt](t,n,i){const o="self"===t.targetId?i:e[t.targetId];if("video"===o.type){const t=ki(o);if(!t)return;t.currentTime=t.duration,t.pause()}else if("audio"===o.type){const t=Ai(o);if(!t)return;t.currentTime=t.duration,t.pause()}}},s=yi("trigger",t,(t=>{const{itemId:n,triggerId:i,...o}=t.detail,s=e[n];if(!s)throw new Error(`Could not execute trigger ${i} on item ${n} because the item could not be found.`);const l=a[s.id]?.find((t=>t.id===i));if(!l)throw new Error(`Could not execute trigger ${i} on item ${n} because the trigger could not be found.`);const d=r[l.action];if(!d)throw new Error(`Could not execute trigger ${i} on item ${n} because an appropriate handler for its '${l.action}' action could not be found.`);d(l,o,s)}));return{destroy(){s()}}},Xa=function(){const t=(0,_i.writable)({blockuments:{},items:{}}),{subscribe:e,set:n,update:i}=t,o=new Map;return{subscribe:e,set:n,update:i,addManifest:(t,e)=>{o.set(t,e),a()},removeManifest:t=>{o.delete(t),a()}};function a(){n(function(...t){const e={blockuments:{},items:{}};for(const n of t)Object.assign(e.blockuments,n.blockuments),Object.assign(e.items,n.items);return e}(...o.values()))}}();function Wa(t){(0,i.append_styles)(t,"svelte-16ijcvp",".mondrian__preview-L_XOPz{display:flex;justify-content:center;align-items:center;position:relative;width:100%}.mondrian__preview--empty-1j7eyn{background-color:var(--art-color-neutral-050)}.mondrian__item-wrapper-2afgtL{transform-origin:center;position:relative;overflow:hidden}.mondrian__width-gauge-1yjeUe{position:absolute;width:100%}")}function Ka(t){let e,n;return e=new no({props:{items:t[13]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};8192&n[0]&&(i.items=t[13]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Qa(t){let e,n;return e=new Na({props:{$$slots:{default:[tr]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};4092&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Za(t){let e,n,o,a;return{c(){e=(0,i.element)("div"),n=(0,i.text)("Block "),o=(0,i.text)(t[0]),a=(0,i.text)(" could not be loaded")},m(t,r){(0,i.insert)(t,e,r),(0,i.append)(e,n),(0,i.append)(e,o),(0,i.append)(e,a)},p(t,e){1&e[0]&&(0,i.set_data)(o,t[0])},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e)}}}function Ga(t){let e,n,o,a,r,s,l,d=`${t[6]}px`,c=`${t[5]}px`;return n=new za({props:{itemId:t[4]}}),{c(){e=(0,i.element)("div"),(0,i.create_component)(n.$$.fragment),(0,i.attr)(e,"class","mondrian__item-wrapper-2afgtL"),(0,i.attr)(e,"role","region"),(0,i.attr)(e,"aria-label",o=t[3].title),(0,i.attr)(e,"aria-live",t[11]),(0,i.set_style)(e,"width",d),(0,i.set_style)(e,"height",c)},m(o,d){(0,i.insert)(o,e,d),(0,i.mount_component)(n,e,null),r=!0,s||(l=[(0,i.listen)(e,"focus",t[18]),(0,i.listen)(e,"blur",t[19]),(0,i.listen)(e,"focusin",t[18]),(0,i.listen)(e,"mouseover",t[18]),(0,i.listen)(e,"mouseout",t[19]),(0,i.listen)(e,"focusout",t[19]),(0,i.action_destroyer)(a=Da.call(null,e,{items:t[7],currentStates:t[14],currentVisibles:t[15],triggers:t[3].triggers}))],s=!0)},p(t,s){const l={};16&s[0]&&(l.itemId=t[4]),n.$set(l),(!r||8&s[0]&&o!==(o=t[3].title))&&(0,i.attr)(e,"aria-label",o),(!r||2048&s[0])&&(0,i.attr)(e,"aria-live",t[11]),a&&(0,i.is_function)(a.update)&&136&s[0]&&a.update.call(null,{items:t[7],currentStates:t[14],currentVisibles:t[15],triggers:t[3].triggers}),64&s[0]&&d!==(d=`${t[6]}px`)&&(0,i.set_style)(e,"width",d),32&s[0]&&c!==(c=`${t[5]}px`)&&(0,i.set_style)(e,"height",c)},i(t){r||((0,i.transition_in)(n.$$.fragment,t),r=!0)},o(t){(0,i.transition_out)(n.$$.fragment,t),r=!1},d(t){t&&(0,i.detach)(e),(0,i.destroy_component)(n),s=!1,(0,i.run_all)(l)}}}function Ja(t){let e,n,o,a,r,s,l,d,c,u,p,m=`scale(${t[10]})`,f=`${t[6]}px`,g=`${t[5]}px`,h=(t[5]??500)*t[10]+"px";return s=new za({props:{itemId:t[4]}}),{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),o=(0,i.space)(),a=(0,i.element)("div"),r=(0,i.element)("div"),(0,i.create_component)(s.$$.fragment),(0,i.attr)(n,"class","mondrian__width-gauge-1yjeUe"),(0,i.attr)(r,"class","mondrian__item-wrapper-2afgtL"),(0,i.attr)(r,"role","region"),(0,i.attr)(r,"aria-label",l=t[3].title),(0,i.attr)(r,"aria-live",t[11]),(0,i.set_style)(r,"transform",m),(0,i.set_style)(r,"width",f),(0,i.set_style)(r,"height",g),(0,i.attr)(e,"class","mondrian__preview-L_XOPz"),(0,i.toggle_class)(e,"mondrian__preview--empty-1j7eyn",t[8]),(0,i.set_style)(e,"height",h)},m(l,m){(0,i.insert)(l,e,m),(0,i.append)(e,n),t[25](n),(0,i.append)(e,o),(0,i.append)(e,a),(0,i.append)(a,r),(0,i.mount_component)(s,r,null),c=!0,u||(p=[(0,i.listen)(r,"focus",t[18]),(0,i.listen)(r,"blur",t[19]),(0,i.listen)(r,"focusin",t[18]),(0,i.listen)(r,"mouseover",t[18]),(0,i.listen)(r,"mouseout",t[19]),(0,i.listen)(r,"focusout",t[19]),(0,i.action_destroyer)(d=Da.call(null,r,{items:t[7],currentStates:t[14],currentVisibles:t[15],triggers:t[3].triggers}))],u=!0)},p(t,n){const o={};16&n[0]&&(o.itemId=t[4]),s.$set(o),(!c||8&n[0]&&l!==(l=t[3].title))&&(0,i.attr)(r,"aria-label",l),(!c||2048&n[0])&&(0,i.attr)(r,"aria-live",t[11]),d&&(0,i.is_function)(d.update)&&136&n[0]&&d.update.call(null,{items:t[7],currentStates:t[14],currentVisibles:t[15],triggers:t[3].triggers}),1024&n[0]&&m!==(m=`scale(${t[10]})`)&&(0,i.set_style)(r,"transform",m),64&n[0]&&f!==(f=`${t[6]}px`)&&(0,i.set_style)(r,"width",f),32&n[0]&&g!==(g=`${t[5]}px`)&&(0,i.set_style)(r,"height",g),(!c||256&n[0])&&(0,i.toggle_class)(e,"mondrian__preview--empty-1j7eyn",t[8]),1056&n[0]&&h!==(h=(t[5]??500)*t[10]+"px")&&(0,i.set_style)(e,"height",h)},i(t){c||((0,i.transition_in)(s.$$.fragment,t),c=!0)},o(t){(0,i.transition_out)(s.$$.fragment,t),c=!1},d(n){n&&(0,i.detach)(e),t[25](null),(0,i.destroy_component)(s),u=!1,(0,i.run_all)(p)}}}function tr(t){let e,n,o,a;const r=[Ja,Ga],s=[];function l(t,e){return t[2]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),o=(0,i.empty)()},m(t,n){s[e].m(t,n),(0,i.insert)(t,o,n),a=!0},p(t,a){let d=e;e=l(t),e===d?s[e].p(t,a):((0,i.group_outros)(),(0,i.transition_out)(s[d],1,1,(()=>{s[d]=null})),(0,i.check_outros)(),n=s[e],n?n.p(t,a):(n=s[e]=r[e](t),n.c()),(0,i.transition_in)(n,1),n.m(o.parentNode,o))},i(t){a||((0,i.transition_in)(n),a=!0)},o(t){(0,i.transition_out)(n),a=!1},d(t){t&&(0,i.detach)(o),s[e].d(t)}}}function er(t){let e,n,o,a,r,s=t[1]&&Ka(t);const l=[Za,Qa],d=[];function c(t,e){return void 0===t[3]||void 0===t[4]?0:1}return n=c(t),o=d[n]=l[n](t),{c(){s&&s.c(),e=(0,i.space)(),o.c(),a=(0,i.empty)()},m(t,o){s&&s.m(t,o),(0,i.insert)(t,e,o),d[n].m(t,o),(0,i.insert)(t,a,o),r=!0},p(t,r){t[1]?s?(s.p(t,r),2&r[0]&&(0,i.transition_in)(s,1)):(s=Ka(t),s.c(),(0,i.transition_in)(s,1),s.m(e.parentNode,e)):s&&((0,i.group_outros)(),(0,i.transition_out)(s,1,1,(()=>{s=null})),(0,i.check_outros)());let u=n;n=c(t),n===u?d[n].p(t,r):((0,i.group_outros)(),(0,i.transition_out)(d[u],1,1,(()=>{d[u]=null})),(0,i.check_outros)(),o=d[n],o?o.p(t,r):(o=d[n]=l[n](t),o.c()),(0,i.transition_in)(o,1),o.m(a.parentNode,a))},i(t){r||((0,i.transition_in)(s),(0,i.transition_in)(o),r=!0)},o(t){(0,i.transition_out)(s),(0,i.transition_out)(o),r=!1},d(t){t&&((0,i.detach)(e),(0,i.detach)(a)),s&&s.d(t),d[n].d(t)}}}function nr(t,e,n){let o,a,r,s,l,d,c,u=i.noop;t.$$.on_destroy.push((()=>u()));let{manifest:p}=e,{blockumentId:m}=e,{prefetch:f=!0}=e,{autoSize:g=!0}=e;(0,b.setContext)(_,!0);const h=Symbol("LearnComponent");let z,y,v=!1;const $=function(){const t=new Map;return{...(0,_i.writable)(t),add:(e,n)=>(t.has(e)||t.set(e,function(t){let e,n,i;t.subscribe((t=>{e=t}));const o=(0,_i.writable)(e);o.subscribe((t=>{n=i??e,i=t}));const a={...o,revert(t){i===t&&a.set(n)},reset(){a.set(e)}};return a}(n)),t.get(e)),get(e){if(!t.has(e))throw new Error(`No state found for item ${e}`);return t.get(e)},resetAll(){[...t.values()].forEach((t=>{t.reset()}))}}}(),x=function(){const t=new Map;return{...(0,_i.writable)(t),upsert(e,n){if(!t.has(e)){const i=function(t){const e={...(0,_i.writable)(t),show(){e.set(!0)},hide(){e.set(!1)},reset(){e.set(t)}};return e}(n);return t.set(e,i),i}const i=t.get(e);return i.set(n),i},get(e){if(!t.has(e))throw new Error(`No visibility found for item ${e}`);return t.get(e)},resetAll(){[...t.values()].forEach((t=>{t.reset()}))}}}(),w=(0,_i.writable)(new Map),k=(0,_i.writable)({});(0,i.component_subscribe)(t,k,(t=>n(7,d=t)));const S=(0,_i.derived)(k,(t=>Object.values(t)));(0,i.component_subscribe)(t,S,(t=>n(13,c=t))),(0,_i.derived)([w,S],(([t,e])=>({triggers:t,items:e}))).subscribe((({items:t})=>{t.forEach((t=>{$.add(t.id,(0,_i.readable)(t.initialState)),x.upsert(t.id,t.initialVisible)})),x.resetAll(),$.resetAll()}));const I={getTriggersBySourceId:()=>(0,_i.readonly)(w),getItem:t=>(0,_i.derived)(k,(e=>e[t])),getState:t=>$.get(t),getVisible:t=>x.get(t),bindTriggers:Ua,registerVideoElement(t,e){wi(t,e)},getVideoElement:t=>ki(t),unregisterVideoElement(t){Si(t)},registerAudioElement(t,e){Ii(t,e)},getAudioElement:t=>Ai(t),unregisterAudioElement(t){Ci(t)}};var A;let C;A=I,(0,b.setContext)(xi,A),(0,b.onMount)((()=>{x.resetAll();const t=new ResizeObserver((()=>{C&&L()}));return C&&t.observe(C),()=>{t.disconnect()}})),(0,b.onDestroy)((()=>{Xa.removeManifest(h)}));let j,E,M=1;function L(){if(!(y&&C&&l&&g&&r&&s))return;const t=C.offsetWidth;n(10,M=Math.min(1,t/r))}let P="off";const R=qa()((t=>{n(11,P=t?"polite":"off")}),100,{maxWait:500,trailing:!0});return t.$$set=t=>{"manifest"in t&&n(20,p=t.manifest),"blockumentId"in t&&n(0,m=t.blockumentId),"prefetch"in t&&n(1,f=t.prefetch),"autoSize"in t&&n(2,g=t.autoSize)},t.$$.update=()=>{if(1048585&t.$$.dirty[0]){const t=function(t,e){const n=structuredClone(t.items)??{};for(const t in n)n[t].blockumentId!==e&&delete n[t];return n}(p,m);n(3,z=p.blockuments?.[m]),n(4,y=z?.children[0]?.id),n(8,v=1===Object.keys(t).length),Xa.addManifest(h,p),w.set((e=z?.triggers??[],new Map(Object.entries(De()(e,(t=>t.sourceId??"none")))))),k.set(t)}var e;16&t.$$.dirty[0]&&(n(12,o=y?$.get(y):void 0),u(),u=(0,i.subscribe)(o,(t=>n(24,l=t)))),16777360&t.$$.dirty[0]&&n(23,a=y&&d[y]&&l?Ki(d[y],l,["width","height"]):void 0),8388608&t.$$.dirty[0]&&n(6,r=a?.width.value),8388608&t.$$.dirty[0]&&n(5,s=a?.height.value),6291552&t.$$.dirty[0]&&(j===r&&E===s||(n(21,j=r),n(22,E=s),L()))},[m,f,g,z,y,s,r,d,v,C,M,P,o,c,$,x,k,S,function(){R(!0)},function(){R(!1)},p,j,E,a,l,function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{C=t,n(9,C)}))}]}class ir extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,nr,er,i.safe_not_equal,{manifest:20,blockumentId:0,prefetch:1,autoSize:2},Wa,[-1,-1])}}const or=ir;var ar=n(6170),rr=n.n(ar);const sr=((t,e={width:"100%"},n="div")=>i=>{const o=(0,ar.useRef)(null),a=(0,ar.useRef)(null);return(0,ar.useEffect)((()=>(a.current=new t({target:o.current,props:i}),()=>{a.current?.$destroy()})),[]),(0,ar.useEffect)((()=>{a.current?.$set(i)}),[i]),rr().createElement(n,{ref:o,style:e})})(or),lr=t=>{const{manifest:e,...n}=t,i=(0,ar.useMemo)((()=>{const t=pt.safeParse(e);if(t.success)return t.data}),[e]);return i?rr().createElement(sr,{manifest:i,...n}):null}}}]);